import{J as dt,S as gt,i as mt,s as pt,e as Dt,b as $,C as yt,h as T,K as it,q as Bt,L as st,m as U,r as Xt,n as m,H as V,u as xr,a as vt,c as wt,M as tt,f as q,g as Tt,t as Q,d as Mt,N as oe,I as at,x as ut,y as _t,z as ft,A as ht,O as ve,P as Nt,w as Xn,k as et,l as nt,j as Ar,Q as Ve,p as W,R as $t,T as Nr,v as Jt,U as Gt,V as hn,o as kn,W as qt,X as le,Y as Sn,Z as ae,_ as qe,$ as ze,a0 as Ue,B as io,a1 as so}from"../../chunks/index-435f6a21.js";import{w as It}from"../../chunks/index-e453f1c9.js";const Pt={},we=(t,e,n,r)=>{const o=t+n,i=e+r/2;return[o,i,0]},be=(t,e,n,r)=>{const o=t,i=e+r/2;return[o,i,180]},ke=(t,e,n,r)=>[t+n/2,e,90],Se=(t,e,n,r)=>{const o=t+n/2,i=e+r;return[o,i,270]};function ye(t,e){const r=dt(t.potentialAnchorsStore)[e];if(r===void 0)throw"potential anchor not found";return r}function Cr(t,e){let n=Object.values(dt(t.potentialAnchorsStore));return e!==void 0&&(n=n.filter(r=>{for(let o in e){const i=e[o];if(r[o]!==i)return!1}return!0})),n}function Wt(t,e){let n=Object.values(dt(t.anchorsStore));return e!==void 0&&(n=n.filter(r=>{for(let o in e){const i=e[o];if(r[o]!==i)return!1}return!0})),n}function ce(t,e,n){ee(t,e);const r=Wt(t,{edgeId:e});if(r.length!==2)throw`there should be two anchors for a given edge, there are ${r.length}`;const o=r.filter(i=>i.sourceOrTarget===n);if(o.length!==1)throw"there should only be one source/target anchor";return o[0]}function ee(t,e){const r=dt(t.edgesStore)[e];if(r===void 0)throw"edge not found";return r}function ue(t,e){return dt(t.nodesStore)[e]}function lo(t,e,n,r,o){const i=s;return i.type="fixed",i;function s(){const l=Wt(t,{edgeId:e});if(l.length!==2)throw`there should be two anchors per edge, have: ${l.length}`;let[a,c]=l;a.id!==n&&([a,c]=[c,a]);const u=ue(t,r),{positionX:d,positionY:f,width:h,height:g}=u,[v,b,y]=o(d,f,h,g);a.positionX=v,a.positionY=b,a.angle=y,c.callback.type==="dynamic"&&c.callback()}}function Ie(t,e,n){const r=o;return r.type="dynamic",r;function o(){const i=Wt(t,{edgeId:e});if(i.length!==2)throw`there should be two anchors per edge, have: ${i.length}`;let[s,l]=i;s.id!==n&&([s,l]=[l,s]);const a=ue(t,s.nodeId),c=ue(t,l.nodeId),[u,d,f,h]=[a.positionX+a.width/2,a.positionY+a.height/2,c.positionX+c.width/2,c.positionY+c.height/2];let g=s.angle;const v=(d-h)/(u-f);if(Math.abs(v)<1)if(a.positionX<c.positionX){const[b,y]=we(a.positionX,a.positionY,a.width,a.height);be(c.positionX,c.positionY,c.width,c.height),s.setPosition(b,y),s.angle=0}else{const[b,y]=be(a.positionX,a.positionY,a.width,a.height);we(c.positionX,c.positionY,c.width,c.height),s.setPosition(b,y),s.angle=180}else if(a.positionY<c.positionY){const[b,y]=Se(a.positionX,a.positionY,a.width,a.height);ke(c.positionX,c.positionY,c.width,c.height),s.setPosition(b,y),s.angle=270}else{const[b,y]=ke(a.positionX,a.positionY,a.width,a.height);Se(c.positionX,c.positionY,c.width,c.height),s.setPosition(b,y),s.angle=90}g!==s.angle&&l.callback()}}function ao(t,e,n,r){return o;function o(){const i=ye(t,e),s=ue(t,n),{positionX:l,positionY:a,width:c,height:u}=s,[d,f,h]=r(l,a,c,u);i.positionX=d,i.positionY=f,i.angle=h}}class Ee{constructor(e,n,r,o,i,s,l,a,c){this.id=e,this.nodeId=n,this.edgeId=r,this.sourceOrTarget=o,this.positionX=i,this.positionY=s,this.callback=l,this.canvasId=a,this.angle=c}getOtherAnchorId(){const e=Pt[this.canvasId],n=Wt(e,{edgeId:this.edgeId});if(n.length!==2)throw"something is wrong, every anchor should have exactly one other associated anchor";return n.filter(o=>o.id!==this.id)[0].id}setPositionFromNode(){this.callback();const{edgesStore:e}=Pt[this.canvasId];e.update(n=>{const r=n[this.edgeId];return this.sourceOrTarget==="source"?(r.sourceX=this.positionX,r.sourceY=this.positionY):(r.targetX=this.positionX,r.targetY=this.positionY),{...n}})}updateEdges(){const{edgesStore:e}=Pt[this.canvasId];e.update(n=>{const r=n[this.edgeId];return r===void 0?{...n}:(this.sourceOrTarget==="source"?(r.sourceX=this.positionX,r.sourceY=this.positionY):(r.targetX=this.positionX,r.targetY=this.positionY),{...n})})}setPosition(e,n){this.positionX=e,this.positionY=n,this.updateEdges()}setPositionFromMovement(e,n){this.positionX+=e,this.positionY+=n;const{edgesStore:r}=Pt[this.canvasId];r.update(o=>{const i=o[this.edgeId];return this.sourceOrTarget==="source"?(i.sourceX+=e,i.sourceY+=n):(i.targetX+=e,i.targetY+=n),{...o}})}}let Tr=class{constructor(e,n,r,o,i,s,l,a,c,u,d,f){this.id=e,this.icon=n,this.label=r,this.positionX=o,this.positionY=i,this.width=s,this.height=l,this.bgColor=a,this.canvasId=c,this.childNodes=u,this.className=d,this.clickCallback=f}setPositionFromMovement(e,n){const{nodesStore:r,anchorsStore:o,potentialAnchorsStore:i,boundary:s,lockedOption:l}=Pt[this.canvasId];if(dt(l))return;const a=dt(s);typeof a=="object"&&(this.positionX+this.width+e>=a.x||this.positionY+this.height+n>=a.y||this.positionY+n<=0||this.positionX+e<=0)||(this.positionX+=e,this.positionY+=n,r.update(c=>{if(this.childNodes)for(const u of this.childNodes)c[u].setPositionFromMovement(e,n);return{...c}}),o.update(c=>{for(const u in c)c[u].nodeId===this.id&&c[u].setPositionFromNode();return{...c}}),i.update(c=>{for(const u in c)c[u].nodeId===this.id&&c[u].callback();return{...c}}))}delete(){const e=Pt[this.canvasId],{nodesStore:n,anchorsStore:r,edgesStore:o}=Pt[this.canvasId];n.update(l=>{for(const a in l)l[a].id===this.id&&delete l[a];return{...l}});const i=Wt(e,{nodeId:this.id});for(let l of i){const a=l.edgeId;ee(e,a).delete()}const s=Cr(e,{nodeId:this.id});for(const l of s)l.delete()}};class In{constructor(e,n,r,o,i,s,l,a,c,u,d,f,h,g,v,b){this.id=e,this.sourceX=n,this.sourceY=r,this.targetX=o,this.targetY=i,this.canvasId=s,this.label=l,this.type=a,this.labelBgColor=c,this.labelTextColor=u,this.edgeColor=d,this.animate=f,this.noHandle=h,this.arrow=g,this.clickCallback=v,this.className=b}delete(){const e=Pt[this.canvasId],{nodesStore:n,anchorsStore:r,edgesStore:o}=e,i=ce(e,this.id,"source"),s=ce(e,this.id,"target");r.update(l=>{for(const a in l)(a===i.id||a==s.id)&&delete l[a];return{...l}}),o.update(l=>(delete l[this.id],{...l}))}}let co=class{constructor(e,n,r,o,i,s,l){this.id=e,this.nodeId=n,this.callback=r,this.positionX=o,this.positionY=i,this.angle=s,this.canvasId=l}delete(){const{potentialAnchorsStore:e}=Pt[this.canvasId];e.update(n=>{for(const r in n)n[r].id===this.id&&delete n[r];return{...n}})}};const Mr=()=>(Math.random()+1).toString(36).substring(7);function Dn(t,e,n,r,o){if(e===null)throw"you cannot create an anchor without a user node (for now)";const i=o.id,s=Mr();let l;n==="target"?l=o.targetAnchorCb:l=o.sourceAnchorCb;let a;return l===void 0?a=Ie(t,i,s):a=lo(t,i,s,e.id,l),new Ee(s,e.id,i,n,-1,-1,a,r,0)}function uo(t,e,n){const r={};for(let o=0;o<e.length;o++){const i=e[o],{source:s,target:l,id:a,type:c,label:u,labelBgColor:d,labelTextColor:f,edgeColor:h,animate:g,noHandle:v,arrow:b,clickCallback:y,className:X}=i,R=Wt(t,{edgeId:a});if(R.length!==2)throw"We should have two anchors for every node";if(new Set(R.map(p=>p.sourceOrTarget)).size!==2)throw"we should have one source and one target anchor";let x,_;R[0].sourceOrTarget==="source"?(x=R[0],_=R[1]):(x=R[1],_=R[0]),r[a]=new In(a,x.positionX,x.positionY,_.positionX,_.positionY,n,i.label===void 0?"":i.label,i.type===void 0?"bezier":i.type,i.labelBgColor===void 0?"white":i.labelBgColor,i.labelTextColor===void 0?"black":i.labelTextColor,i.edgeColor===void 0?"default":i.edgeColor,i.animate===void 0?!1:i.animate,i.noHandle===void 0?!1:i.noHandle,i.arrow===void 0?!1:i.arrow,i.clickCallback===void 0?()=>{}:i.clickCallback,i.className===void 0?"":i.className)}t.edgesStore.set(r)}function On(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}return null}function me(t,e,n,r){const o=Mr(),i=ao(e,o,n,t);return new co(o,n,i,-1,-1,0,r)}function fo(t,e,n){const r={};for(let i=0;i<e.length;i++){const s=e[i];for(let l of[ke,Se,we,be]){const a=me(l,t,s.id,n);r[a.id]=a}}t.potentialAnchorsStore.set(r);const o=Object.values(dt(t.potentialAnchorsStore));for(const i of o)i.callback()}function ho(t,e,n,r){const o={};for(let s=0;s<n.length;s++){const l=n[s],{source:a,target:c}=l,u=On(a,e),d=On(c,e),f=Dn(t,u,"source",r,l),h=Dn(t,d,"target",r,l);o[f.id]=f,o[h.id]=h}t.anchorsStore.set(o);const i=Wt(t);for(const s of i)s.callback()}function go(t,e,n){const r={};for(let o=0;o<e.length;o++){const i=e[o],s=i.id,l=new Tr(s.toString(),i.icon,i.label===void 0?"":i.label,i.position.x,i.position.y,i.width,i.height,i.bgColor,n,i.childNodes===void 0?[]:i.childNodes,i.className===void 0?"":i.className,i.clickCallback===void 0?()=>{}:i.clickCallback);r[s]=l}t.nodesStore.set(r)}function xt(t){return Pt[t]}function mo(t){return Pt[t]={nodesStore:It({}),edgesStore:It({}),anchorsStore:It({}),potentialAnchorsStore:It({}),widthStore:It(600),heightStore:It(600),backgroundStore:It(!1),movementStore:It(!0),nodeSelected:It(!1),nodeIdSelected:It(-1),d3Scale:It(1),options:It({}),temporaryEdgeStore:It([]),nodeCreate:It(!1),boundary:It(!1),edgeEditModal:It(null),lockedOption:It(!1),themeStore:It("dark")},Pt[t]}function Yn(t,e,n){const r=xt(t);go(r,e,t),ho(r,e,n,t),uo(r,n,t),dt(r.nodeCreate)&&fo(r,e,t)}var po={value:()=>{}};function En(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new We(n)}function We(t){this._=t}function _o(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}We.prototype=En.prototype={constructor:We,on:function(t,e){var n=this._,r=_o(t+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(t=r[i]).type)&&(o=yo(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=r[i]).type)n[o]=Ln(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Ln(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new We(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};function yo(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function Ln(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=po,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var dn="http://www.w3.org/1999/xhtml";const Fn={svg:"http://www.w3.org/2000/svg",xhtml:dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Fn.hasOwnProperty(e)?{space:Fn[e],local:t}:t}function vo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dn&&e.documentElement.namespaceURI===dn?e.createElement(t):e.createElementNS(n,t)}}function wo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pr(t){var e=nn(t);return(e.local?wo:vo)(e)}function bo(){}function xn(t){return t==null?bo:function(){return this.querySelector(t)}}function ko(t){typeof t!="function"&&(t=xn(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=r[o]=new Array(s),a,c,u=0;u<s;++u)(a=i[u])&&(c=t.call(a,a.__data__,u,i))&&("__data__"in a&&(c.__data__=a.__data__),l[u]=c);return new At(r,this._parents)}function zr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function So(){return[]}function Rr(t){return t==null?So:function(){return this.querySelectorAll(t)}}function Io(t){return function(){return zr(t.apply(this,arguments))}}function Eo(t){typeof t=="function"?t=Io(t):t=Rr(t);for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var s=e[i],l=s.length,a,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),o.push(a));return new At(r,o)}function Br(t){return function(){return this.matches(t)}}function Xr(t){return function(e){return e.matches(t)}}var xo=Array.prototype.find;function Ao(t){return function(){return xo.call(this.children,t)}}function No(){return this.firstElementChild}function Co(t){return this.select(t==null?No:Ao(typeof t=="function"?t:Xr(t)))}var To=Array.prototype.filter;function Mo(){return Array.from(this.children)}function Po(t){return function(){return To.call(this.children,t)}}function zo(t){return this.selectAll(t==null?Mo:Po(typeof t=="function"?t:Xr(t)))}function Ro(t){typeof t!="function"&&(t=Br(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=r[o]=[],a,c=0;c<s;++c)(a=i[c])&&t.call(a,a.__data__,c,i)&&l.push(a);return new At(r,this._parents)}function Dr(t){return new Array(t.length)}function Bo(){return new At(this._enter||this._groups.map(Dr),this._parents)}function Ze(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ze.prototype={constructor:Ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xo(t){return function(){return t}}function Do(t,e,n,r,o,i){for(var s=0,l,a=e.length,c=i.length;s<c;++s)(l=e[s])?(l.__data__=i[s],r[s]=l):n[s]=new Ze(t,i[s]);for(;s<a;++s)(l=e[s])&&(o[s]=l)}function Oo(t,e,n,r,o,i,s){var l,a,c=new Map,u=e.length,d=i.length,f=new Array(u),h;for(l=0;l<u;++l)(a=e[l])&&(f[l]=h=s.call(a,a.__data__,l,e)+"",c.has(h)?o[l]=a:c.set(h,a));for(l=0;l<d;++l)h=s.call(t,i[l],l,i)+"",(a=c.get(h))?(r[l]=a,a.__data__=i[l],c.delete(h)):n[l]=new Ze(t,i[l]);for(l=0;l<u;++l)(a=e[l])&&c.get(f[l])===a&&(o[l]=a)}function Yo(t){return t.__data__}function Lo(t,e){if(!arguments.length)return Array.from(this,Yo);var n=e?Oo:Do,r=this._parents,o=this._groups;typeof t!="function"&&(t=Xo(t));for(var i=o.length,s=new Array(i),l=new Array(i),a=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],f=d.length,h=Fo(t.call(u,u&&u.__data__,c,r)),g=h.length,v=l[c]=new Array(g),b=s[c]=new Array(g),y=a[c]=new Array(f);n(u,d,v,b,y,h,e);for(var X=0,R=0,x,_;X<g;++X)if(x=v[X]){for(X>=R&&(R=X+1);!(_=b[R])&&++R<g;);x._next=_||null}}return s=new At(s,r),s._enter=l,s._exit=a,s}function Fo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ho(){return new At(this._exit||this._groups.map(Dr),this._parents)}function Vo(t,e,n){var r=this.enter(),o=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function qo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,i=r.length,s=Math.min(o,i),l=new Array(o),a=0;a<s;++a)for(var c=n[a],u=r[a],d=c.length,f=l[a]=new Array(d),h,g=0;g<d;++g)(h=c[g]||u[g])&&(f[g]=h);for(;a<o;++a)l[a]=n[a];return new At(l,this._parents)}function Uo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Wo(t){t||(t=Go);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],l=s.length,a=o[i]=new Array(l),c,u=0;u<l;++u)(c=s[u])&&(a[u]=c);a.sort(e)}return new At(o,this._parents).order()}function Go(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ko(){return Array.from(this)}function Zo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Jo(){let t=0;for(const e of this)++t;return t}function jo(){return!this.node()}function $o(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&t.call(l,l.__data__,i,o);return this}function ti(t){return function(){this.removeAttribute(t)}}function ei(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ni(t,e){return function(){this.setAttribute(t,e)}}function ri(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ii(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function si(t,e){var n=nn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ei:ti:typeof e=="function"?n.local?ii:oi:n.local?ri:ni)(n,e))}function Or(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function li(t){return function(){this.style.removeProperty(t)}}function ai(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ci(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ui(t,e,n){return arguments.length>1?this.each((e==null?li:typeof e=="function"?ci:ai)(t,e,n??"")):fe(this.node(),t)}function fe(t,e){return t.style.getPropertyValue(e)||Or(t).getComputedStyle(t,null).getPropertyValue(e)}function fi(t){return function(){delete this[t]}}function hi(t,e){return function(){this[t]=e}}function di(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gi(t,e){return arguments.length>1?this.each((e==null?fi:typeof e=="function"?di:hi)(t,e)):this.node()[t]}function Yr(t){return t.trim().split(/^|\s+/)}function An(t){return t.classList||new Lr(t)}function Lr(t){this._node=t,this._names=Yr(t.getAttribute("class")||"")}Lr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fr(t,e){for(var n=An(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function Hr(t,e){for(var n=An(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function mi(t){return function(){Fr(this,t)}}function pi(t){return function(){Hr(this,t)}}function _i(t,e){return function(){(e.apply(this,arguments)?Fr:Hr)(this,t)}}function yi(t,e){var n=Yr(t+"");if(arguments.length<2){for(var r=An(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?_i:e?mi:pi)(n,e))}function vi(){this.textContent=""}function wi(t){return function(){this.textContent=t}}function bi(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ki(t){return arguments.length?this.each(t==null?vi:(typeof t=="function"?bi:wi)(t)):this.node().textContent}function Si(){this.innerHTML=""}function Ii(t){return function(){this.innerHTML=t}}function Ei(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xi(t){return arguments.length?this.each(t==null?Si:(typeof t=="function"?Ei:Ii)(t)):this.node().innerHTML}function Ai(){this.nextSibling&&this.parentNode.appendChild(this)}function Ni(){return this.each(Ai)}function Ci(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ti(){return this.each(Ci)}function Mi(t){var e=typeof t=="function"?t:Pr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Pi(){return null}function zi(t,e){var n=typeof t=="function"?t:Pr(t),r=e==null?Pi:typeof e=="function"?e:xn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ri(){var t=this.parentNode;t&&t.removeChild(this)}function Bi(){return this.each(Ri)}function Xi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Di(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Oi(t){return this.select(t?Di:Xi)}function Yi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Li(t){return function(e){t.call(this,e,this.__data__)}}function Fi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Hi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,o=e.length,i;n<o;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Vi(t,e,n){return function(){var r=this.__on,o,i=Li(e);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=e;return}}this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function qi(t,e,n){var r=Fi(t+""),o,i=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,u;a<c;++a)for(o=0,u=l[a];o<i;++o)if((s=r[o]).type===u.type&&s.name===u.name)return u.value}return}for(l=e?Vi:Hi,o=0;o<i;++o)this.each(l(r[o],e,n));return this}function Vr(t,e,n){var r=Or(t),o=r.CustomEvent;typeof o=="function"?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Ui(t,e){return function(){return Vr(this,t,e)}}function Wi(t,e){return function(){return Vr(this,t,e.apply(this,arguments))}}function Gi(t,e){return this.each((typeof e=="function"?Wi:Ui)(t,e))}function*Qi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Nn=[null];function At(t,e){this._groups=t,this._parents=e}function Te(){return new At([[document.documentElement]],Nn)}function Ki(){return this}At.prototype=Te.prototype={constructor:At,select:ko,selectAll:Eo,selectChild:Co,selectChildren:zo,filter:Ro,data:Lo,enter:Bo,exit:Ho,join:Vo,merge:qo,selection:Ki,order:Uo,sort:Wo,call:Qo,nodes:Ko,node:Zo,size:Jo,empty:jo,each:$o,attr:si,style:ui,property:gi,classed:yi,text:ki,html:xi,raise:Ni,lower:Ti,append:Mi,insert:zi,remove:Bi,clone:Oi,datum:Yi,on:qi,dispatch:Gi,[Symbol.iterator]:Qi};function Zt(t){return typeof t=="string"?new At([[document.querySelector(t)]],[document.documentElement]):new At([[t]],Nn)}function Zi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qt(t,e){if(t=Zi(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ji(t){return typeof t=="string"?new At([document.querySelectorAll(t)],[document.documentElement]):new At([zr(t)],Nn)}const gn={capture:!0,passive:!1};function mn(t){t.preventDefault(),t.stopImmediatePropagation()}function ji(t){var e=t.document.documentElement,n=Zt(t).on("dragstart.drag",mn,gn);"onselectstart"in e?n.on("selectstart.drag",mn,gn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $i(t,e){var n=t.document.documentElement,r=Zt(t).on("dragstart.drag",null);e&&(r.on("click.drag",mn,gn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Cn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Me(){}var xe=.7,Je=1/xe,se="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ts=/^#([0-9a-f]{3,8})$/,es=new RegExp(`^rgb\\(${se},${se},${se}\\)$`),ns=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),rs=new RegExp(`^rgba\\(${se},${se},${se},${Ae}\\)$`),os=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Ae}\\)$`),is=new RegExp(`^hsl\\(${Ae},${Ot},${Ot}\\)$`),ss=new RegExp(`^hsla\\(${Ae},${Ot},${Ot},${Ae}\\)$`),Hn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cn(Me,Ne,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vn,formatHex:Vn,formatHex8:ls,formatHsl:as,formatRgb:qn,toString:qn});function Vn(){return this.rgb().formatHex()}function ls(){return this.rgb().formatHex8()}function as(){return Ur(this).formatHsl()}function qn(){return this.rgb().formatRgb()}function Ne(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ts.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Un(e):n===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Re(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Re(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=es.exec(t))?new Ct(e[1],e[2],e[3],1):(e=ns.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rs.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=os.exec(t))?Re(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=is.exec(t))?Qn(e[1],e[2]/100,e[3]/100,1):(e=ss.exec(t))?Qn(e[1],e[2]/100,e[3]/100,e[4]):Hn.hasOwnProperty(t)?Un(Hn[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Un(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function Re(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ct(t,e,n,r)}function cs(t){return t instanceof Me||(t=Ne(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function pn(t,e,n,r){return arguments.length===1?cs(t):new Ct(t,e,n,r??1)}function Ct(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cn(Ct,pn,qr(Me,{brighter(t){return t=t==null?Je:Math.pow(Je,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xe:Math.pow(xe,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(ne(this.r),ne(this.g),ne(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wn,formatHex:Wn,formatHex8:us,formatRgb:Gn,toString:Gn}));function Wn(){return`#${te(this.r)}${te(this.g)}${te(this.b)}`}function us(){return`#${te(this.r)}${te(this.g)}${te(this.b)}${te((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gn(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${ne(this.r)}, ${ne(this.g)}, ${ne(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function te(t){return t=ne(t),(t<16?"0":"")+t.toString(16)}function Qn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zt(t,e,n,r)}function Ur(t){if(t instanceof zt)return new zt(t.h,t.s,t.l,t.opacity);if(t instanceof Me||(t=Ne(t)),!t)return new zt;if(t instanceof zt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,l=i-o,a=(i+o)/2;return l?(e===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-e)/l+2:s=(e-n)/l+4,l/=a<.5?i+o:2-i-o,s*=60):l=a>0&&a<1?0:s,new zt(s,l,a,t.opacity)}function fs(t,e,n,r){return arguments.length===1?Ur(t):new zt(t,e,n,r??1)}function zt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cn(zt,fs,qr(Me,{brighter(t){return t=t==null?Je:Math.pow(Je,t),new zt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xe:Math.pow(xe,t),new zt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Ct(an(t>=240?t-240:t+120,o,r),an(t,o,r),an(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new zt(Kn(this.h),Be(this.s),Be(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${Kn(this.h)}, ${Be(this.s)*100}%, ${Be(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Kn(t){return t=(t||0)%360,t<0?t+360:t}function Be(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Wr=t=>()=>t;function hs(t,e){return function(n){return t+n*e}}function ds(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gs(t){return(t=+t)==1?Gr:function(e,n){return n-e?ds(e,n,t):Wr(isNaN(e)?n:e)}}function Gr(t,e){var n=e-t;return n?hs(t,n):Wr(isNaN(t)?e:t)}const Zn=function t(e){var n=gs(e);function r(o,i){var s=n((o=pn(o)).r,(i=pn(i)).r),l=n(o.g,i.g),a=n(o.b,i.b),c=Gr(o.opacity,i.opacity);return function(u){return o.r=s(u),o.g=l(u),o.b=a(u),o.opacity=c(u),o+""}}return r.gamma=t,r}(1);function Kt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cn=new RegExp(_n.source,"g");function ms(t){return function(){return t}}function ps(t){return function(e){return t(e)+""}}function _s(t,e){var n=_n.lastIndex=cn.lastIndex=0,r,o,i,s=-1,l=[],a=[];for(t=t+"",e=e+"";(r=_n.exec(t))&&(o=cn.exec(e));)(i=o.index)>n&&(i=e.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,a.push({i:s,x:Kt(r,o)})),n=cn.lastIndex;return n<e.length&&(i=e.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?a[0]?ps(a[0].x):ms(e):(e=a.length,function(c){for(var u=0,d;u<e;++u)l[(d=a[u]).i]=d.x(c);return l.join("")})}var Jn=180/Math.PI,yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qr(t,e,n,r,o,i){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*r)&&(n-=t*a,r-=e*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),t*r<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Jn,skewX:Math.atan(a)*Jn,scaleX:s,scaleY:l}}var Xe;function ys(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yn:Qr(e.a,e.b,e.c,e.d,e.e,e.f)}function vs(t){return t==null||(Xe||(Xe=document.createElementNS("http://www.w3.org/2000/svg","g")),Xe.setAttribute("transform",t),!(t=Xe.transform.baseVal.consolidate()))?yn:(t=t.matrix,Qr(t.a,t.b,t.c,t.d,t.e,t.f))}function Kr(t,e,n,r){function o(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,h,g){if(c!==d||u!==f){var v=h.push("translate(",null,e,null,n);g.push({i:v-4,x:Kt(c,d)},{i:v-2,x:Kt(u,f)})}else(d||f)&&h.push("translate("+d+e+f+n)}function s(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Kt(c,u)})):u&&d.push(o(d)+"rotate("+u+r)}function l(c,u,d,f){c!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Kt(c,u)}):u&&d.push(o(d)+"skewX("+u+r)}function a(c,u,d,f,h,g){if(c!==d||u!==f){var v=h.push(o(h)+"scale(",null,",",null,")");g.push({i:v-4,x:Kt(c,d)},{i:v-2,x:Kt(u,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),s(c.rotate,u.rotate,d,f),l(c.skewX,u.skewX,d,f),a(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(h){for(var g=-1,v=f.length,b;++g<v;)d[(b=f[g]).i]=b.x(h);return d.join("")}}}var ws=Kr(ys,"px, ","px)","deg)"),bs=Kr(vs,", ",")",")"),ks=1e-12;function jn(t){return((t=Math.exp(t))+1/t)/2}function Ss(t){return((t=Math.exp(t))-1/t)/2}function Is(t){return((t=Math.exp(2*t))-1)/(t+1)}const Es=function t(e,n,r){function o(i,s){var l=i[0],a=i[1],c=i[2],u=s[0],d=s[1],f=s[2],h=u-l,g=d-a,v=h*h+g*g,b,y;if(v<ks)y=Math.log(f/c)/e,b=function(I){return[l+I*h,a+I*g,c*Math.exp(e*I*y)]};else{var X=Math.sqrt(v),R=(f*f-c*c+r*v)/(2*c*n*X),x=(f*f-c*c-r*v)/(2*f*n*X),_=Math.log(Math.sqrt(R*R+1)-R),p=Math.log(Math.sqrt(x*x+1)-x);y=(p-_)/e,b=function(I){var k=I*y,N=jn(_),B=c/(n*X)*(N*Is(e*k+_)-Ss(_));return[l+B*h,a+B*g,c*N/jn(e*k+_)]}}return b.duration=y*1e3*e/Math.SQRT2,b}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,a=l*l;return t(s,l,a)},o}(Math.SQRT2,2,4);var he=0,pe=0,de=0,Zr=1e3,$e,_e,tn=0,re=0,rn=0,Ce=typeof performance=="object"&&performance.now?performance:Date,Jr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tn(){return re||(Jr(xs),re=Ce.now()+rn)}function xs(){re=0}function en(){this._call=this._time=this._next=null}en.prototype=jr.prototype={constructor:en,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Tn():+n)+(e==null?0:+e),!this._next&&_e!==this&&(_e?_e._next=this:$e=this,_e=this),this._call=t,this._time=n,vn()},stop:function(){this._call&&(this._call=null,this._time=1/0,vn())}};function jr(t,e,n){var r=new en;return r.restart(t,e,n),r}function As(){Tn(),++he;for(var t=$e,e;t;)(e=re-t._time)>=0&&t._call.call(void 0,e),t=t._next;--he}function $n(){re=(tn=Ce.now())+rn,he=pe=0;try{As()}finally{he=0,Cs(),re=0}}function Ns(){var t=Ce.now(),e=t-tn;e>Zr&&(rn-=e,tn=t)}function Cs(){for(var t,e=$e,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$e=n);_e=t,vn(r)}function vn(t){if(!he){pe&&(pe=clearTimeout(pe));var e=t-re;e>24?(t<1/0&&(pe=setTimeout($n,t-Ce.now()-rn)),de&&(de=clearInterval(de))):(de||(tn=Ce.now(),de=setInterval(Ns,Zr)),he=1,Jr($n))}}function tr(t,e,n){var r=new en;return e=e==null?0:+e,r.restart(o=>{r.stop(),t(o+e)},e,n),r}var Ts=En("start","end","cancel","interrupt"),Ms=[],$r=0,er=1,wn=2,Ge=3,nr=4,bn=5,Qe=6;function on(t,e,n,r,o,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ps(t,n,{name:e,index:r,group:o,on:Ts,tween:Ms,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:$r})}function Mn(t,e){var n=Rt(t,e);if(n.state>$r)throw new Error("too late; already scheduled");return n}function Yt(t,e){var n=Rt(t,e);if(n.state>Ge)throw new Error("too late; already running");return n}function Rt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ps(t,e,n){var r=t.__transition,o;r[e]=n,n.timer=jr(i,0,n.time);function i(c){n.state=er,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,d,f,h;if(n.state!==er)return a();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Ge)return tr(s);h.state===nr?(h.state=Qe,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=Qe,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(tr(function(){n.state===Ge&&(n.state=nr,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=wn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===wn){for(n.state=Ge,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=bn,1),d=-1,f=o.length;++d<f;)o[d].call(t,u);n.state===bn&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Qe,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Ke(t,e){var n=t.__transition,r,o,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){i=!1;continue}o=r.state>wn&&r.state<bn,r.state=Qe,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}i&&delete t.__transition}}function zs(t){return this.each(function(){Ke(this,t)})}function Rs(t,e){var n,r;return function(){var o=Yt(this,t),i=o.tween;if(i!==n){r=n=i;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Bs(t,e,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Yt(this,t),s=i.tween;if(s!==r){o=(r=s).slice();for(var l={name:e,value:n},a=0,c=o.length;a<c;++a)if(o[a].name===e){o[a]=l;break}a===c&&o.push(l)}i.tween=o}}function Xs(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Rt(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===t)return s.value;return null}return this.each((e==null?Rs:Bs)(n,t,e))}function Pn(t,e,n){var r=t._id;return t.each(function(){var o=Yt(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return Rt(o,r).value[e]}}function to(t,e){var n;return(typeof e=="number"?Kt:e instanceof Ne?Zn:(n=Ne(e))?(e=n,Zn):_s)(t,e)}function Ds(t){return function(){this.removeAttribute(t)}}function Os(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ys(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Ls(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Fs(t,e,n){var r,o,i;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,l)))}}function Hs(t,e,n){var r,o,i;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+"",s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,l)))}}function Vs(t,e){var n=nn(t),r=n==="transform"?bs:to;return this.attrTween(t,typeof e=="function"?(n.local?Hs:Fs)(n,r,Pn(this,"attr."+t,e)):e==null?(n.local?Os:Ds)(n):(n.local?Ls:Ys)(n,r,e))}function qs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Us(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ws(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Us(t,i)),n}return o._value=e,o}function Gs(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&qs(t,i)),n}return o._value=e,o}function Qs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=nn(t);return this.tween(n,(r.local?Ws:Gs)(r,e))}function Ks(t,e){return function(){Mn(this,t).delay=+e.apply(this,arguments)}}function Zs(t,e){return e=+e,function(){Mn(this,t).delay=e}}function Js(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ks:Zs)(e,t)):Rt(this.node(),e).delay}function js(t,e){return function(){Yt(this,t).duration=+e.apply(this,arguments)}}function $s(t,e){return e=+e,function(){Yt(this,t).duration=e}}function tl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?js:$s)(e,t)):Rt(this.node(),e).duration}function el(t,e){if(typeof e!="function")throw new Error;return function(){Yt(this,t).ease=e}}function nl(t){var e=this._id;return arguments.length?this.each(el(e,t)):Rt(this.node(),e).ease}function rl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Yt(this,t).ease=n}}function ol(t){if(typeof t!="function")throw new Error;return this.each(rl(this._id,t))}function il(t){typeof t!="function"&&(t=Br(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,l=r[o]=[],a,c=0;c<s;++c)(a=i[c])&&t.call(a,a.__data__,c,i)&&l.push(a);return new Ut(r,this._parents,this._name,this._id)}function sl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),s=new Array(r),l=0;l<i;++l)for(var a=e[l],c=n[l],u=a.length,d=s[l]=new Array(u),f,h=0;h<u;++h)(f=a[h]||c[h])&&(d[h]=f);for(;l<r;++l)s[l]=e[l];return new Ut(s,this._parents,this._name,this._id)}function ll(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function al(t,e,n){var r,o,i=ll(e)?Mn:Yt;return function(){var s=i(this,t),l=s.on;l!==r&&(o=(r=l).copy()).on(e,n),s.on=o}}function cl(t,e){var n=this._id;return arguments.length<2?Rt(this.node(),n).on.on(t):this.each(al(n,t,e))}function ul(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function fl(){return this.on("end.remove",ul(this._id))}function hl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xn(t));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var l=r[s],a=l.length,c=i[s]=new Array(a),u,d,f=0;f<a;++f)(u=l[f])&&(d=t.call(u,u.__data__,f,l))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,on(c[f],e,n,f,c,Rt(u,n)));return new Ut(i,this._parents,e,n)}function dl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Rr(t));for(var r=this._groups,o=r.length,i=[],s=[],l=0;l<o;++l)for(var a=r[l],c=a.length,u,d=0;d<c;++d)if(u=a[d]){for(var f=t.call(u,u.__data__,d,a),h,g=Rt(u,n),v=0,b=f.length;v<b;++v)(h=f[v])&&on(h,e,n,v,f,g);i.push(f),s.push(u)}return new Ut(i,s,e,n)}var gl=Te.prototype.constructor;function ml(){return new gl(this._groups,this._parents)}function pl(t,e){var n,r,o;return function(){var i=fe(this,t),s=(this.style.removeProperty(t),fe(this,t));return i===s?null:i===n&&s===r?o:o=e(n=i,r=s)}}function eo(t){return function(){this.style.removeProperty(t)}}function _l(t,e,n){var r,o=n+"",i;return function(){var s=fe(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function yl(t,e,n){var r,o,i;return function(){var s=fe(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),fe(this,t))),s===a?null:s===r&&a===o?i:(o=a,i=e(r=s,l))}}function vl(t,e){var n,r,o,i="style."+e,s="end."+i,l;return function(){var a=Yt(this,t),c=a.on,u=a.value[i]==null?l||(l=eo(e)):void 0;(c!==n||o!==u)&&(r=(n=c).copy()).on(s,o=u),a.on=r}}function wl(t,e,n){var r=(t+="")=="transform"?ws:to;return e==null?this.styleTween(t,pl(t,r)).on("end.style."+t,eo(t)):typeof e=="function"?this.styleTween(t,yl(t,r,Pn(this,"style."+t,e))).each(vl(this._id,t)):this.styleTween(t,_l(t,r,e),n).on("end.style."+t,null)}function bl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function kl(t,e,n){var r,o;function i(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&bl(t,s,n)),r}return i._value=e,i}function Sl(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,kl(t,e,n??""))}function Il(t){return function(){this.textContent=t}}function El(t){return function(){var e=t(this);this.textContent=e??""}}function xl(t){return this.tween("text",typeof t=="function"?El(Pn(this,"text",t)):Il(t==null?"":t+""))}function Al(t){return function(e){this.textContent=t.call(this,e)}}function Nl(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Al(o)),e}return r._value=t,r}function Cl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nl(t))}function Tl(){for(var t=this._name,e=this._id,n=no(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,a,c=0;c<l;++c)if(a=s[c]){var u=Rt(a,e);on(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ut(r,this._parents,t,n)}function Ml(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},a={value:function(){--o===0&&i()}};n.each(function(){var c=Yt(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),c.on=e}),o===0&&i()})}var Pl=0;function Ut(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function no(){return++Pl}var Ft=Te.prototype;Ut.prototype={constructor:Ut,select:hl,selectAll:dl,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:il,merge:sl,selection:ml,transition:Tl,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:cl,attr:Vs,attrTween:Qs,style:wl,styleTween:Sl,text:xl,textTween:Cl,remove:fl,tween:Xs,delay:Js,duration:tl,ease:nl,easeVarying:ol,end:Ml,[Symbol.iterator]:Ft[Symbol.iterator]};function zl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Rl={time:null,delay:0,duration:250,ease:zl};function Bl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Xl(t){var e,n;t instanceof Ut?(e=t._id,t=t._name):(e=no(),(n=Rl).time=Tn(),t=t==null?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,a,c=0;c<l;++c)(a=s[c])&&on(a,t,e,c,s,n||Bl(a,e));return new Ut(r,this._parents,t,e)}Te.prototype.interrupt=zs;Te.prototype.transition=Xl;const De=t=>()=>t;function Dl(t,{sourceEvent:e,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Vt(t,e,n){this.k=t,this.x=e,this.y=n}Vt.prototype={constructor:Vt,scale:function(t){return t===1?this:new Vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sn=new Vt(1,0,0);ro.prototype=Vt.prototype;function ro(t){for(;!t.__zoom;)if(!(t=t.parentNode))return sn;return t.__zoom}function un(t){t.stopImmediatePropagation()}function ge(t){t.preventDefault(),t.stopImmediatePropagation()}function Ol(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Yl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function rr(){return this.__zoom||sn}function Ll(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Fl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hl(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Vl(){var t=Ol,e=Yl,n=Hl,r=Ll,o=Fl,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Es,c=En("start","zoom","end"),u,d,f,h=500,g=150,v=0,b=10;function y(w){w.property("__zoom",rr).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",G).on("touchmove.zoom",rt).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,z,E,A){var C=w.selection?w.selection():w;C.property("__zoom",rr),w!==C?_(w,z,E,A):C.interrupt().each(function(){p(this,arguments).event(A).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},y.scaleBy=function(w,z,E,A){y.scaleTo(w,function(){var C=this.__zoom.k,L=typeof z=="function"?z.apply(this,arguments):z;return C*L},E,A)},y.scaleTo=function(w,z,E,A){y.transform(w,function(){var C=e.apply(this,arguments),L=this.__zoom,M=E==null?x(C):typeof E=="function"?E.apply(this,arguments):E,Y=L.invert(M),j=typeof z=="function"?z.apply(this,arguments):z;return n(R(X(L,j),M,Y),C,s)},E,A)},y.translateBy=function(w,z,E,A){y.transform(w,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof E=="function"?E.apply(this,arguments):E),e.apply(this,arguments),s)},null,A)},y.translateTo=function(w,z,E,A,C){y.transform(w,function(){var L=e.apply(this,arguments),M=this.__zoom,Y=A==null?x(L):typeof A=="function"?A.apply(this,arguments):A;return n(sn.translate(Y[0],Y[1]).scale(M.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof E=="function"?-E.apply(this,arguments):-E),L,s)},A,C)};function X(w,z){return z=Math.max(i[0],Math.min(i[1],z)),z===w.k?w:new Vt(z,w.x,w.y)}function R(w,z,E){var A=z[0]-E[0]*w.k,C=z[1]-E[1]*w.k;return A===w.x&&C===w.y?w:new Vt(w.k,A,C)}function x(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function _(w,z,E,A){w.on("start.zoom",function(){p(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){p(this,arguments).event(A).end()}).tween("zoom",function(){var C=this,L=arguments,M=p(C,L).event(A),Y=e.apply(C,L),j=E==null?x(Y):typeof E=="function"?E.apply(C,L):E,Z=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),F=C.__zoom,H=typeof z=="function"?z.apply(C,L):z,bt=a(F.invert(j).concat(Z/F.k),H.invert(j).concat(Z/H.k));return function(ct){if(ct===1)ct=H;else{var J=bt(ct),jt=Z/J[2];ct=new Vt(jt,j[0]-J[0]*jt,j[1]-J[1]*jt)}M.zoom(null,ct)}})}function p(w,z,E){return!E&&w.__zooming||new I(w,z)}function I(w,z){this.that=w,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,z),this.taps=0}I.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,z){return this.mouse&&w!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var z=Zt(this.that).datum();c.call(w,this.that,new Dl(w,{sourceEvent:this.sourceEvent,target:y,type:w,transform:this.that.__zoom,dispatch:c}),z)}};function k(w,...z){if(!t.apply(this,arguments))return;var E=p(this,z).event(w),A=this.__zoom,C=Math.max(i[0],Math.min(i[1],A.k*Math.pow(2,r.apply(this,arguments)))),L=Qt(w);if(E.wheel)(E.mouse[0][0]!==L[0]||E.mouse[0][1]!==L[1])&&(E.mouse[1]=A.invert(E.mouse[0]=L)),clearTimeout(E.wheel);else{if(A.k===C)return;E.mouse=[L,A.invert(L)],Ke(this),E.start()}ge(w),E.wheel=setTimeout(M,g),E.zoom("mouse",n(R(X(A,C),E.mouse[0],E.mouse[1]),E.extent,s));function M(){E.wheel=null,E.end()}}function N(w,...z){if(f||!t.apply(this,arguments))return;var E=w.currentTarget,A=p(this,z,!0).event(w),C=Zt(w.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",Z,!0),L=Qt(w,E),M=w.clientX,Y=w.clientY;ji(w.view),un(w),A.mouse=[L,this.__zoom.invert(L)],Ke(this),A.start();function j(F){if(ge(F),!A.moved){var H=F.clientX-M,bt=F.clientY-Y;A.moved=H*H+bt*bt>v}A.event(F).zoom("mouse",n(R(A.that.__zoom,A.mouse[0]=Qt(F,E),A.mouse[1]),A.extent,s))}function Z(F){C.on("mousemove.zoom mouseup.zoom",null),$i(F.view,A.moved),ge(F),A.event(F).end()}}function B(w,...z){if(t.apply(this,arguments)){var E=this.__zoom,A=Qt(w.changedTouches?w.changedTouches[0]:w,this),C=E.invert(A),L=E.k*(w.shiftKey?.5:2),M=n(R(X(E,L),A,C),e.apply(this,z),s);ge(w),l>0?Zt(this).transition().duration(l).call(_,M,A,w):Zt(this).call(y.transform,M,A,w)}}function G(w,...z){if(t.apply(this,arguments)){var E=w.touches,A=E.length,C=p(this,z,w.changedTouches.length===A).event(w),L,M,Y,j;for(un(w),M=0;M<A;++M)Y=E[M],j=Qt(Y,this),j=[j,this.__zoom.invert(j),Y.identifier],C.touch0?!C.touch1&&C.touch0[2]!==j[2]&&(C.touch1=j,C.taps=0):(C.touch0=j,L=!0,C.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(C.taps<2&&(d=j[0],u=setTimeout(function(){u=null},h)),Ke(this),C.start())}}function rt(w,...z){if(this.__zooming){var E=p(this,z).event(w),A=w.changedTouches,C=A.length,L,M,Y,j;for(ge(w),L=0;L<C;++L)M=A[L],Y=Qt(M,this),E.touch0&&E.touch0[2]===M.identifier?E.touch0[0]=Y:E.touch1&&E.touch1[2]===M.identifier&&(E.touch1[0]=Y);if(M=E.that.__zoom,E.touch1){var Z=E.touch0[0],F=E.touch0[1],H=E.touch1[0],bt=E.touch1[1],ct=(ct=H[0]-Z[0])*ct+(ct=H[1]-Z[1])*ct,J=(J=bt[0]-F[0])*J+(J=bt[1]-F[1])*J;M=X(M,Math.sqrt(ct/J)),Y=[(Z[0]+H[0])/2,(Z[1]+H[1])/2],j=[(F[0]+bt[0])/2,(F[1]+bt[1])/2]}else if(E.touch0)Y=E.touch0[0],j=E.touch0[1];else return;E.zoom("touch",n(R(M,Y,j),E.extent,s))}}function K(w,...z){if(this.__zooming){var E=p(this,z).event(w),A=w.changedTouches,C=A.length,L,M;for(un(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),L=0;L<C;++L)M=A[L],E.touch0&&E.touch0[2]===M.identifier?delete E.touch0:E.touch1&&E.touch1[2]===M.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(M=Qt(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<b)){var Y=Zt(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:De(+w),y):r},y.filter=function(w){return arguments.length?(t=typeof w=="function"?w:De(!!w),y):t},y.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:De(!!w),y):o},y.extent=function(w){return arguments.length?(e=typeof w=="function"?w:De([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):e},y.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],y):[i[0],i[1]]},y.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(w){return arguments.length?(n=w,y):n},y.duration=function(w){return arguments.length?(l=+w,y):l},y.interpolate=function(w){return arguments.length?(a=w,y):a},y.on=function(){var w=c.on.apply(c,arguments);return w===c?y:w},y.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,y):Math.sqrt(v)},y.tapDistance=function(w){return arguments.length?(b=+w,y):b},y}function ql(t){let e,n,r,o,i,s,l,a;return{c(){e=it("g"),n=it("rect"),s=it("text"),l=Bt(t[0]),this.h()},l(c){e=st(c,"g",{});var u=U(e);n=st(u,"rect",{class:!0,"data-testid":!0,fill:!0,x:!0,y:!0,width:!0,height:!0}),U(n).forEach(T),s=st(u,"text",{class:!0,x:!0,y:!0,"font-size":!0,"dominant-baseline":!0,"text-anchor":!0,fill:!0});var d=U(s);l=Xt(d,t[0]),d.forEach(T),u.forEach(T),this.h()},h(){m(n,"class","EdgeTextBg"),m(n,"data-testid","edge-text-bg"),m(n,"fill",r=t[5]?t[5]:"white"),m(n,"x",o=t[3]-t[1]/2),m(n,"y",i=t[2]-or),m(n,"width",t[1]),m(n,"height",16),m(s,"class","EdgeText"),m(s,"x",t[3]),m(s,"y",t[2]),m(s,"font-size","12px"),m(s,"dominant-baseline","central"),m(s,"text-anchor","middle"),m(s,"fill",a=t[4]?t[4]:"black")},m(c,u){$(c,e,u),V(e,n),V(e,s),V(s,l)},p(c,u){u&32&&r!==(r=c[5]?c[5]:"white")&&m(n,"fill",r),u&10&&o!==(o=c[3]-c[1]/2)&&m(n,"x",o),u&4&&i!==(i=c[2]-or)&&m(n,"y",i),u&2&&m(n,"width",c[1]),u&1&&xr(l,c[0]),u&8&&m(s,"x",c[3]),u&4&&m(s,"y",c[2]),u&16&&a!==(a=c[4]?c[4]:"black")&&m(s,"fill",a)},d(c){c&&T(e)}}}function Ul(t){let e=null+"",n;return{c(){n=Bt(e)},l(r){n=Xt(r,e)},m(r,o){$(r,n,o)},p:yt,d(r){r&&T(n)}}}function Wl(t){let e;function n(i,s){return typeof i[0]>"u"||!i[0]?Ul:ql}let r=n(t),o=r(t);return{c(){o.c(),e=Dt()},l(i){o.l(i),e=Dt()},m(i,s){o.m(i,s),$(i,e,s)},p(i,[s]){r===(r=n(i))&&o?o.p(i,s):(o.d(1),o=r(i),o&&(o.c(),o.m(e.parentNode,e)))},i:yt,o:yt,d(i){o.d(i),i&&T(e)}}}const or=7;function Gl(t,e,n){let r,o,i,s,l,a,c,u,d,f,h,{edgeTextProps:g}=e;return t.$$set=v=>{"edgeTextProps"in v&&n(6,g=v.edgeTextProps)},t.$$.update=()=>{t.$$.dirty&64&&n(0,{label:r,labelBgColor:o,labelTextColor:i,centerX:s,centerY:l}=g,r,(n(5,o),n(6,g)),(n(4,i),n(6,g)),(n(11,s),n(6,g)),(n(10,l),n(6,g))),t.$$.dirty&1&&n(7,a=r.length<3?9:7),t.$$.dirty&2048&&n(3,c=s),t.$$.dirty&1024&&n(2,u=l),t.$$.dirty&1&&n(9,d=r.split(" ").length-1),t.$$.dirty&513&&n(8,f=r.length-d),t.$$.dirty&384&&n(1,h=f*a)},[r,h,u,c,i,o,g,a,f,d,l,s]}class Ql extends gt{constructor(e){super(),mt(this,e,Gl,Wl,pt,{edgeTextProps:6})}}function Kl(t){let e,n,r;return{c(){e=it("path"),this.h()},l(o){e=st(o,"path",{class:!0,d:!0,fill:!0,stroke:!0,"aria-label":!0}),U(e).forEach(T),this.h()},h(){m(e,"class",n=Nt(t[3]?`animate ${t[7].className}`:`${t[7].className}`)+" svelte-7tz672"),m(e,"d",t[4]),m(e,"fill","transparent"),m(e,"stroke",r=t[1]!=="default"?t[1]:t[5]==="dark"?"white":"black"),m(e,"aria-label","svg-path")},m(o,i){$(o,e,i)},p(o,i){i&8&&n!==(n=Nt(o[3]?`animate ${o[7].className}`:`${o[7].className}`)+" svelte-7tz672")&&m(e,"class",n),i&16&&m(e,"d",o[4]),i&34&&r!==(r=o[1]!=="default"?o[1]:o[5]==="dark"?"white":"black")&&m(e,"stroke",r)},d(o){o&&T(e)}}}function Zl(t){let e,n,r;return{c(){e=it("path"),this.h()},l(o){e=st(o,"path",{class:!0,d:!0,fill:!0,stroke:!0,"marker-end":!0,"aria-label":!0}),U(e).forEach(T),this.h()},h(){m(e,"class",n=Nt(t[3]?`animate ${t[7].className}`:`${t[7].className}`)+" svelte-7tz672"),m(e,"d",t[4]),m(e,"fill","transparent"),m(e,"stroke",r=t[1]!=="default"?t[1]:t[5]==="dark"?"white":"black"),m(e,"marker-end","url(#arrow)"),m(e,"aria-label","svg-path")},m(o,i){$(o,e,i)},p(o,i){i&8&&n!==(n=Nt(o[3]?`animate ${o[7].className}`:`${o[7].className}`)+" svelte-7tz672")&&m(e,"class",n),i&16&&m(e,"d",o[4]),i&34&&r!==(r=o[1]!=="default"?o[1]:o[5]==="dark"?"white":"black")&&m(e,"stroke",r)},d(o){o&&T(e)}}}function ir(t){let e,n;return e=new Ql({props:{edgeTextProps:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.edgeTextProps=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Jl(t){let e,n,r,o,i,s,l,a,c,u,d;function f(b,y){return b[2]?Zl:Kl}let h=f(t),g=h(t),v=t[0].label&&ir(t);return{c(){e=it("defs"),n=it("marker"),r=it("polygon"),o=vt(),i=it("path"),s=vt(),g.c(),l=vt(),v&&v.c(),a=Dt(),this.h()},l(b){e=st(b,"defs",{});var y=U(e);n=st(y,"marker",{id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0});var X=U(n);r=st(X,"polygon",{points:!0,fill:!0}),U(r).forEach(T),X.forEach(T),y.forEach(T),o=wt(b),i=st(b,"path",{id:!0,d:!0,fill:!0,stroke:!0,"stroke-opacity":!0,"stroke-width":!0,class:!0}),U(i).forEach(T),s=wt(b),g.l(b),l=wt(b),v&&v.l(b),a=Dt(),this.h()},h(){m(r,"points",t[9]),m(r,"fill","gray"),m(n,"id","arrow"),m(n,"markerWidth","9"),m(n,"markerHeight","9"),m(n,"refX","8"),m(n,"refY","4"),m(n,"orient","auto"),m(i,"id","edgeSelector"),m(i,"d",t[4]),m(i,"fill","transparent"),m(i,"stroke","red"),m(i,"stroke-opacity","0"),m(i,"stroke-width","20"),m(i,"class","svelte-7tz672")},m(b,y){$(b,e,y),V(e,n),V(n,r),$(b,o,y),$(b,i,y),$(b,s,y),g.m(b,y),$(b,l,y),v&&v.m(b,y),$(b,a,y),c=!0,u||(d=[tt(i,"click",t[8]),tt(i,"keypress",t[17])],u=!0)},p(b,[y]){(!c||y&16)&&m(i,"d",b[4]),h===(h=f(b))&&g?g.p(b,y):(g.d(1),g=h(b),g&&(g.c(),g.m(l.parentNode,l))),b[0].label?v?(v.p(b,y),y&1&&q(v,1)):(v=ir(b),v.c(),q(v,1),v.m(a.parentNode,a)):v&&(Tt(),Q(v,1,1,()=>{v=null}),Mt())},i(b){c||(q(v),c=!0)},o(b){Q(v),c=!1},d(b){b&&T(e),b&&T(o),b&&T(i),b&&T(s),g.d(b),b&&T(l),v&&v.d(b),b&&T(a),u=!1,oe(d)}}}function jl(t,e,n){let r,o,i,s,l,a,c,u,d,f,h,{baseEdgeProps:g}=e,{canvasId:v}=e;const b=g.id,y=xt(v),X=y.themeStore;at(t,X,I=>n(5,h=I));const R=ee(y,b),x=()=>{const I=xt(v),k=ee(I,b);k.clickCallback&&k.clickCallback(k),console.log(k.className)},_="0 0, 9 4.5, 0 9";function p(I){ve.call(this,t,I)}return t.$$set=I=>{"baseEdgeProps"in I&&n(10,g=I.baseEdgeProps),"canvasId"in I&&n(11,v=I.canvasId)},t.$$.update=()=>{t.$$.dirty&1024&&n(4,{path:r,animate:o,arrow:i,label:s,labelBgColor:l,labelTextColor:a,edgeColor:c,centerX:u,centerY:d}=g,r,(n(3,o),n(10,g)),(n(2,i),n(10,g)),(n(16,s),n(10,g)),(n(15,l),n(10,g)),(n(14,a),n(10,g)),(n(1,c),n(10,g)),(n(13,u),n(10,g)),(n(12,d),n(10,g))),t.$$.dirty&126976&&n(0,f={label:s,labelBgColor:l,labelTextColor:a,centerX:u,centerY:d})},[f,c,i,o,r,h,X,R,x,_,g,v,d,u,a,l,s,p]}class zn extends gt{constructor(e){super(),mt(this,e,jl,Jl,pt,{baseEdgeProps:10,canvasId:11})}}function $l(t){let e,n;return e=new zn({props:{baseEdgeProps:t[1],canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,[o]){const i={};o&2&&(i.baseEdgeProps=r[1]),o&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Oe(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ta(t,e,n){let r,o,i,s,l;const a={};a.Left="left",a.Right="right",a.Top="top",a.Bottom="bottom";function c({pos:x,x1:_,y1:p,x2:I,y2:k,c:N}){let B,G;switch(x){case a.Left:B=_-Oe(_-I,N),G=p;break;case a.Right:B=_+Oe(I-_,N),G=p;break;case a.Top:B=_,G=p-Oe(p-k,N);break;case a.Bottom:B=_,G=p+Oe(k-p,N);break}return[B,G]}function u({sourceX:x,sourceY:_,sourcePosition:p=a.Bottom,targetX:I,targetY:k,targetPosition:N=a.Top,curvature:B=.25}){const[G,rt]=c({pos:p,x1:x,y1:_,x2:I,y2:k,c:B}),[K,w]=c({pos:N,x1:I,y1:k,x2:x,y2:_,c:B});return`M${x},${_} C${G},${rt} ${K},${w} ${I},${k}`}function d({sourceX:x,sourceY:_,sourcePosition:p=a.Bottom,targetX:I,targetY:k,targetPosition:N=a.Top,curvature:B=.25}){const[G,rt]=c({pos:p,x1:x,y1:_,x2:I,y2:k,c:B}),[K,w]=c({pos:N,x1:I,y1:k,x2:x,y2:_,c:B}),z=x*.125+G*.375+K*.375+I*.125,E=_*.125+rt*.375+w*.375+k*.125,A=Math.abs(z-x),C=Math.abs(E-_);return[z,E,A,C]}let{canvasId:f}=e,{edgeId:h}=e;const g=xt(f),{nodesStore:v,edgesStore:b,anchorsStore:y}=g;at(t,b,x=>n(9,l=x));let X,R;return t.$$set=x=>{"canvasId"in x&&n(0,f=x.canvasId),"edgeId"in x&&n(3,h=x.edgeId)},t.$$.update=()=>{if(t.$$.dirty&520&&n(4,X=l[h]),t.$$.dirty&17){const x=xt(f),_=ce(x,X.id,"source"),p=ce(x,X.id,"target"),I={0:"right",90:"top",180:"left",270:"bottom"};n(5,R={sourceX:X.sourceX,sourceY:X.sourceY,sourcePosition:I[_.angle],targetX:X.targetX,targetY:X.targetY,targetPosition:I[p.angle],curvature:.25})}t.$$.dirty&32&&n(8,r=u(R)),t.$$.dirty&32&&n(7,[o,i]=d(R),o,(n(6,i),n(5,R),n(0,f),n(4,X),n(9,l),n(3,h))),t.$$.dirty&464&&n(1,s={...X,path:r,centerX:o,centerY:i})},[f,s,b,h,X,R,i,o,r,l]}class ea extends gt{constructor(e){super(),mt(this,e,ta,$l,pt,{canvasId:0,edgeId:3})}}const sr=["left","right"],lr=({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:o="bottom",targetPosition:i="top"})=>{const s=sr.includes(o),l=sr.includes(i);if(s&&!l||l&&!s){const h=s?Math.abs(n-t):0,g=t>n?t-h:t+h,v=s?0:Math.abs(r-e),b=e<r?e+v:e-v;return[g,b,h,v]}const c=Math.abs(n-t)/2,u=n<t?n+c:n-c,d=Math.abs(r-e)/2,f=r<e?r+d:r-d;return[u,f,c,d]};function na(t){let e,n;return e=new zn({props:{baseEdgeProps:t[1],canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,[o]){const i={};o&2&&(i.baseEdgeProps=r[1]),o&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function ra(t,e,n){let r,o,i,s;const l={};l.Left="left",l.Right="right",l.Top="top",l.Bottom="bottom";const a=(_,p,I)=>`L ${_},${p-I}Q ${_},${p} ${_+I},${p}`,c=(_,p,I)=>`L ${_+I},${p}Q ${_},${p} ${_},${p-I}`,u=(_,p,I)=>`L ${_},${p-I}Q ${_},${p} ${_-I},${p}`,d=(_,p,I)=>`L ${_-I},${p}Q ${_},${p} ${_},${p-I}`,f=(_,p,I)=>`L ${_+I},${p}Q ${_},${p} ${_},${p+I}`,h=(_,p,I)=>`L ${_},${p+I}Q ${_},${p} ${_+I},${p}`,g=(_,p,I)=>`L ${_},${p+I}Q ${_},${p} ${_-I},${p}`,v=(_,p,I)=>`L ${_-I},${p}Q ${_},${p} ${_},${p+I}`;function b({sourceX:_,sourceY:p,sourcePosition:I=l.Bottom,targetX:k,targetY:N,targetPosition:B=l.Top,borderRadius:G=5,centerX:rt,centerY:K}){const[w,z,E,A]=lr({sourceX:_,sourceY:p,targetX:k,targetY:N}),C=Math.min(G,Math.abs(k-_)),L=Math.min(G,Math.abs(N-p)),M=Math.min(C,L,E,A),Y=[l.Left,l.Right],j=typeof rt<"u"?rt:w,Z=typeof K<"u"?K:z;let F=null,H=null;return _<=k?(F=p<=N?a(_,Z,M):h(_,Z,M),H=p<=N?v(k,Z,M):d(k,Z,M)):(F=p<N?u(_,Z,M):g(_,Z,M),H=p<N?f(k,Z,M):c(k,Z,M)),Y.includes(I)&&Y.includes(B)?_<=k?(F=p<=N?v(j,p,M):d(j,p,M),H=p<=N?a(j,N,M):h(j,N,M)):(I===l.Right&&B===l.Left||I===l.Left&&B===l.Right||I===l.Left&&B===l.Left)&&(F=p<=N?f(j,p,M):c(j,p,M),H=p<=N?u(j,N,M):g(j,N,M)):Y.includes(I)&&!Y.includes(B)?(_<=k?F=p<=N?v(k,p,M):d(k,p,M):F=p<=N?f(k,p,M):c(k,p,M),H=""):!Y.includes(I)&&Y.includes(B)&&(_<=k?F=p<=N?a(_,N,M):h(_,N,M):F=p<=N?u(_,N,M):g(_,N,M),H=""),`M ${_},${p}${F}${H}L ${k},${N}`}let{edge:y}=e,{borderRadius:X=5}=e,{canvasId:R}=e,x;return t.$$set=_=>{"edge"in _&&n(3,y=_.edge),"borderRadius"in _&&n(4,X=_.borderRadius),"canvasId"in _&&n(0,R=_.canvasId)},t.$$.update=()=>{if(t.$$.dirty&25){const _=xt(R),p=ce(_,y.id,"source"),I=ce(_,y.id,"target"),k={0:"right",90:"top",180:"left",270:"bottom"};n(5,x={sourceX:y.sourceX,sourceY:y.sourceY,targetX:y.targetX,targetY:y.targetY,sourcePosition:k[p.angle],targetPosition:k[I.angle],borderRadius:X})}t.$$.dirty&32&&n(7,[r,o]=lr(x),r,(n(6,o),n(5,x),n(0,R),n(3,y),n(4,X))),t.$$.dirty&32&&n(8,i=b(x)),t.$$.dirty&456&&n(1,s={...y,path:i,centerX:r,centerY:o})},[R,s,b,y,X,x,o,r,i]}class oo extends gt{constructor(e){super(),mt(this,e,ra,na,pt,{getSmoothStepPath:2,edge:3,borderRadius:4,canvasId:0})}get getSmoothStepPath(){return this.$$.ctx[2]}}function oa(t){let e,n;return e=new oo({props:{edge:t[0],borderRadius:0,canvasId:t[1]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,[o]){const i={};o&1&&(i.edge=r[0]),o&2&&(i.canvasId=r[1]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function ia(t,e,n){let{edge:r}=e,{canvasId:o}=e;return t.$$set=i=>{"edge"in i&&n(0,r=i.edge),"canvasId"in i&&n(1,o=i.canvasId)},[r,o]}class sa extends gt{constructor(e){super(),mt(this,e,ia,oa,pt,{edge:0,canvasId:1})}}function la(t){let e,n;return e=new zn({props:{baseEdgeProps:t[1],canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,[o]){const i={};o&2&&(i.baseEdgeProps=r[1]),o&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function aa(t,e,n){let r,o,i,s,l,a,c,u,{edgeId:d}=e,{canvasId:f}=e;const h=xt(f),{nodesStore:g,edgesStore:v,anchorsStore:b}=h;return at(t,v,y=>n(10,u=y)),t.$$set=y=>{"edgeId"in y&&n(3,d=y.edgeId),"canvasId"in y&&n(0,f=y.canvasId)},t.$$.update=()=>{t.$$.dirty&1032&&n(7,r=u[d]),t.$$.dirty&128&&n(6,o=`M ${r.sourceX},${r.sourceY}L ${r.targetX},${r.targetY}`),t.$$.dirty&128&&n(9,i=Math.abs(r.targetX-r.sourceX)/2),t.$$.dirty&128&&n(8,s=Math.abs(r.targetY-r.sourceY)/2),t.$$.dirty&640&&n(5,l=r.targetX<r.sourceX?r.targetX+i:r.targetX-i),t.$$.dirty&384&&n(4,a=r.targetY<r.sourceY?r.targetY+s:r.targetY-s),t.$$.dirty&240&&n(1,c={...r,path:o,centerX:l,centerY:a})},[f,c,v,d,a,l,o,r,s,i,u]}class ca extends gt{constructor(e){super(),mt(this,e,aa,la,pt,{edgeId:3,canvasId:0})}}function ua(t){let e;return{c(){e=it("circle"),this.h()},l(n){e=st(n,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,fill:!0,class:!0}),U(e).forEach(T),this.h()},h(){m(e,"cx",t[0]),m(e,"cy",t[1]),m(e,"r",5),m(e,"stroke","white"),m(e,"fill","black"),m(e,"class","svelte-1ulqurc")},m(n,r){$(n,e,r)},p(n,[r]){r&1&&m(e,"cx",n[0]),r&2&&m(e,"cy",n[1])},i:yt,o:yt,d(n){n&&T(e)}}}function fa(t,e,n){let{x:r}=e,{y:o}=e;return t.$$set=i=>{"x"in i&&n(0,r=i.x),"y"in i&&n(1,o=i.y)},[r,o]}class ha extends gt{constructor(e){super(),mt(this,e,fa,ua,pt,{x:0,y:1})}}const da=(t,e)=>{let n,r,o;for(let i=0;i<document.styleSheets.length;i++){const l=document.styleSheets[i].cssRules;for(let a=0;a<l.length;a++){const c=l[a];if(c instanceof CSSStyleRule&&c.selectorText===`.${e.className}`){const u=c.cssText,d=u.indexOf("{");o=u.substring(d+1,u.length-1);const f=o.split(" ");f.forEach((h,g)=>{h==="width:"&&(n=h.concat(f[g+1]),n=parseInt(f[g+1])),h==="height:"&&(r=h.concat(f[g+1]),r=parseInt(f[g+1]))})}}}t.nodesStore.update(i=>(n!==void 0&&(i[e.id].width=n),r!==void 0&&(i[e.id].height=r),{...i})),e.setPositionFromMovement(0,0)};function ar(t){let e,n=t[0].label+"",r;return{c(){e=et("div"),r=Bt(n),this.h()},l(o){e=nt(o,"DIV",{class:!0});var i=U(e);r=Xt(i,n),i.forEach(T),this.h()},h(){m(e,"class","Label svelte-mjw5bw")},m(o,i){$(o,e,i),V(e,r)},p(o,i){i&1&&n!==(n=o[0].label+"")&&xr(r,n)},d(o){o&&T(e)}}}function ga(t){let e,n,r,o,i,s,l,a,c;var u=t[0].icon;function d(h){return{props:{color:"#c8ced0",height:"45px"}}}u&&(n=Xn(u,d()));let f=t[0].label!==""&&ar(t);return{c(){e=et("div"),n&&ut(n.$$.fragment),r=vt(),f&&f.c(),this.h()},l(h){e=nt(h,"DIV",{class:!0,style:!0,id:!0});var g=U(e);n&&_t(n.$$.fragment,g),r=wt(g),f&&f.l(g),g.forEach(T),this.h()},h(){m(e,"class",o="Node "+t[0].className+" svelte-mjw5bw"),m(e,"style",i="left: "+t[0].positionX+"px; top: "+t[0].positionY+"px; width: "+(t[0].width-6)+"px; height: "+(t[0].height-6)+"px; cursor: "+(t[1]?"default":"grab")+"; "+(t[0].bgColor?`background-color: ${t[0].bgColor}`:"")),m(e,"id",s="svelvet-"+t[0].id)},m(h,g){$(h,e,g),n&&ft(n,e,null),V(e,r),f&&f.m(e,null),l=!0,a||(c=[tt(window,"mousemove",t[9]),tt(window,"mouseup",t[11]),tt(window,"touchmove",t[10]),tt(window,"touchend",t[11]),tt(e,"mouseleave",t[7]),tt(e,"mousedown",t[5]),tt(e,"contextmenu",t[6]),tt(e,"touchstart",t[5]),tt(e,"mouseenter",t[8])],a=!0)},p(h,[g]){if(u!==(u=h[0].icon)){if(n){Tt();const v=n;Q(v.$$.fragment,1,0,()=>{ht(v,1)}),Mt()}u?(n=Xn(u,d()),ut(n.$$.fragment),q(n.$$.fragment,1),ft(n,e,r)):n=null}h[0].label!==""?f?f.p(h,g):(f=ar(h),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!l||g&1&&o!==(o="Node "+h[0].className+" svelte-mjw5bw"))&&m(e,"class",o),(!l||g&3&&i!==(i="left: "+h[0].positionX+"px; top: "+h[0].positionY+"px; width: "+(h[0].width-6)+"px; height: "+(h[0].height-6)+"px; cursor: "+(h[1]?"default":"grab")+"; "+(h[0].bgColor?`background-color: ${h[0].bgColor}`:"")))&&m(e,"style",i),(!l||g&1&&s!==(s="svelvet-"+h[0].id))&&m(e,"id",s)},i(h){l||(n&&q(n.$$.fragment,h),l=!0)},o(h){n&&Q(n.$$.fragment,h),l=!1},d(h){h&&T(e),n&&ht(n),f&&f.d(),a=!1,oe(c)}}}function ma(t,e,n){let r,o,i,{node:s}=e,{canvasId:l}=e,{nodeId:a}=e;const c=xt(l),{nodesStore:u,edgesStore:d,anchorsStore:f,nodeSelected:h,lockedOption:g}=c;at(t,u,k=>n(17,o=k)),at(t,h,k=>n(16,r=k)),at(t,g,k=>n(1,i=k));let v=!1;Ar(()=>{s.className&&da(c,s)});let b=!1;const y=k=>{k.preventDefault(),b=!0,Ve(h,r=!0,r),v=!0},X=k=>{k.preventDefault(),n(0,s=o[a]),Ve(h,r=!0,r),v=!1},R=k=>{b=!1,Ve(h,r=!1,r)},x=k=>{h.set(!0)},_=k=>{k.preventDefault(),b=!1,v&&u.update(N=>{const B=N[a],G=dt(c.d3Scale);return B.setPositionFromMovement(k.movementX/G,k.movementY/G),{...N}})},p=k=>{b=!1,v&&u.update(N=>{const B=N[a],{x:G,y:rt,width:K,height:w}=k.target.getBoundingClientRect(),z=(k.touches[0].clientX-G)/K*k.target.offsetWidth,E=(k.touches[0].clientY-rt)/w*k.target.offsetHeight;return dt(c.d3Scale),B.setPositionFromMovement(z-B.width/2,E-B.height/2),{...N}})},I=k=>{if(k.preventDefault(),v=!1,s.clickCallback&&b&&s.clickCallback(s),dt(c.options).snap){const N=dt(c.options).snapTo,B=s.positionX,G=s.positionY,rt=Math.round(s.positionX/N)*N,K=Math.round(s.positionY/N)*N;u.update(w=>(w[a].setPositionFromMovement(rt-B,K-G),{...w}))}};return t.$$set=k=>{"node"in k&&n(0,s=k.node),"canvasId"in k&&n(12,l=k.canvasId),"nodeId"in k&&n(13,a=k.nodeId)},[s,i,u,h,g,y,X,R,x,_,p,I,l,a]}class pa extends gt{constructor(e){super(),mt(this,e,ma,ga,pt,{node:0,canvasId:12,nodeId:13})}}const fn=()=>(Math.random()+1).toString(36).substring(7);function _a(t,e,n,r){const o=fn(),i=new In(o,-1,-1,-1,-1,r,"","bezier","black","black","black",!1,!0,!1,()=>{},""),s=fn(),l=Ie(t,o,s),a=new Ee(s,e,o,"source",-1,-1,l,r,0),c=fn(),u=Ie(t,o,c),d=new Ee(c,n,o,"target",-1,-1,u,r,0),{edgesStore:f,anchorsStore:h}=t;h.update(v=>(v[s]=a,v[c]=d,{...v})),f.update(v=>(v[o]=i,{...v}));const g=Wt(t);for(const v of g)v.callback()}const Ye=()=>(Math.random()+1).toString(36).substring(7);function ya(t,e,n,r,o){const i=Ye(),s=new Tr(i,n,r,100,100,"white",{label:"new node"},o,"black",!1,"","black",0,[],"",()=>{}),l=me(we,t,i,o),a=me(be,t,i,o),c=me(ke,t,i,o),u=me(Se,t,i,o),d=Ye(),f=new In(d,-1,-1,-1,-1,o,"","bezier","black","black","black",!1,!0,!1,()=>{},""),h=Ye(),g=Ie(t,d,h),v=new Ee(h,e,d,"source",-1,-1,g,o,0),b=Ye(),y=Ie(t,d,b),X=new Ee(b,i,d,"target",-1,-1,y,o,0),{nodesStore:R,edgesStore:x,anchorsStore:_,potentialAnchorsStore:p}=t;R.update(N=>(N[i]=s,{...N})),_.update(N=>(N[h]=v,N[b]=X,{...N})),p.update(N=>(N[l.id]=l,N[c.id]=c,N[u.id]=u,N[a.id]=a,{...N})),x.update(N=>(N[d]=f,{...N}));const I=Wt(t);for(const N of I)N.callback();const k=Cr(t);for(const N of k)N.callback()}let va=class{constructor(e,n,r,o,i,s,l,a,c,u){this.id=e,this.sourcePotentialAnchorId=n,this.sourceX=r,this.sourceY=o,this.targetPotentialAnchorId=i,this.targetX=s,this.targetY=l,this.canvasId=a,this.type=c,this.edgeColor=u}createEdge(){if(this.targetPotentialAnchorId===null)throw"cannot create edge with null target";const e=xt(this.canvasId),n=ye(e,this.sourcePotentialAnchorId),r=ye(e,this.targetPotentialAnchorId),o=ue(e,n.nodeId),i=ue(e,r.nodeId);_a(e,o.id,i.id,this.canvasId)}createNode(){if(this.targetPotentialAnchorId!==null)throw"you should only create a node when you are hovering over blank space";const e=xt(this.canvasId),r=ye(e,this.sourcePotentialAnchorId).nodeId;ya(e,r,this.targetX,this.targetY,this.canvasId)}};function wa(t){let e,n,r,o;return{c(){e=et("div"),this.h()},l(i){e=nt(i,"DIV",{class:!0,style:!0}),U(e).forEach(T),this.h()},h(){m(e,"class","Anchor svelte-1amf2u8"),m(e,"style",n=`
      height:${Fe}px;
      width:${Le}px;
      top: ${t[2]-Fe/2}px;
      left:${t[1]-Le/2}px;
    `)},m(i,s){$(i,e,s),r||(o=[tt(window,"mousemove",t[12]),tt(window,"mouseup",t[13]),tt(e,"mouseenter",t[14]),tt(e,"mouseleave",t[15]),tt(e,"mousedown",t[16])],r=!0)},p(i,[s]){s&6&&n!==(n=`
      height:${Fe}px;
      width:${Le}px;
      top: ${i[2]-Fe/2}px;
      left:${i[1]-Le/2}px;
    `)&&m(e,"style",n)},i:yt,o:yt,d(i){i&&T(e),r=!1,oe(o)}}}let Le=8,Fe=8;function ba(t,e,n){let r,o,{canvasId:i}=e,{x:s}=e,{y:l}=e,{potentialAnchorId:a}=e;const c=xt(i),u=ye(c,a),{temporaryEdgeStore:d}=xt(i);let f=!1,h=!1;const g=()=>(Math.random()+1).toString(36).substring(7),v=x=>{x.preventDefault(),f&&d.update(_=>{if(_.length!==1)throw"if you are dragging, there should be one edge. We have not implemented multiple edges";const p=_[0],I=dt(c.d3Scale);return p.targetX+=x.movementX/I,p.targetY+=x.movementY/I,[p]})},b=x=>{n(4,f=!1),dt(d).length===1&&dt(d)[0].targetPotentialAnchorId===a?d.update(_=>{for(let p of _)a===p.targetPotentialAnchorId&&p.createEdge();return[]}):dt(d).length===1&&dt(d)[0].targetPotentialAnchorId===null&&d.update(_=>{for(let p of _)p.createNode();return[]})},y=x=>{n(5,h=!0),d.update(_=>{for(let p of _)p.targetPotentialAnchorId=a;return[..._]})},X=x=>{n(5,h=!1),f&&d.update(_=>{for(let p of _)p.targetPotentialAnchorId===a&&(p.targetPotentialAnchorId=null);return[..._]})},R=x=>{x.preventDefault(),x.stopPropagation(),n(4,f=!0),d.update(_=>{if(_.length===0)return[new va(g(),u.id,r,o,null,r,o,i,"straight","black")];throw"there should only be zero or one temporary edge at any given time"})};return t.$$set=x=>{"canvasId"in x&&n(0,i=x.canvasId),"x"in x&&n(1,s=x.x),"y"in x&&n(2,l=x.y),"potentialAnchorId"in x&&n(3,a=x.potentialAnchorId)},t.$$.update=()=>{t.$$.dirty&2&&n(7,r=s),t.$$.dirty&4&&n(6,o=l)},[i,s,l,a,f,h,o,r,c,u,d,g,v,b,y,X,R]}class ka extends gt{constructor(e){super(),mt(this,e,ba,wa,pt,{canvasId:0,x:1,y:2,potentialAnchorId:3})}}function Sa(t){let e;return{c(){e=it("path"),this.h()},l(n){e=st(n,"path",{class:!0,d:!0,fill:!0,stroke:!0,"marker-end":!0,"aria-label":!0}),U(e).forEach(T),this.h()},h(){m(e,"class","animate svelte-qtkn5z"),m(e,"d",t[0]),m(e,"fill","transparent"),m(e,"stroke","gray"),m(e,"marker-end","url(#arrow)"),m(e,"aria-label","svg-path")},m(n,r){$(n,e,r)},p(n,[r]){r&1&&m(e,"d",n[0])},i:yt,o:yt,d(n){n&&T(e)}}}function Ia(t,e,n){let{temporaryEdge:r}=e,o="";return t.$$set=i=>{"temporaryEdge"in i&&n(1,r=i.temporaryEdge)},t.$$.update=()=>{t.$$.dirty&2&&n(0,o=`M ${r.sourceX},${r.sourceY}L ${r.targetX},${r.targetY}`)},[o,r]}class Ea extends gt{constructor(e){super(),mt(this,e,Ia,Sa,pt,{temporaryEdge:1})}}function xa(t,e,n,r,o,i,s){return t.select(`.Edges-${e}`).transition().duration(0).call(n.translateTo,0,0).transition().duration(0).call(n.translateTo,o.x,o.y).transition().duration(0).call(n.scaleBy,(.4+.16*i).toFixed(2)),r=t.zoomIdentity.translate(o.x,o.y).scale((.4+.16*i).toFixed(2)),t.select(`.Nodes-${e}`).transition().duration(0).call(n.translateTo,0,0).transition().duration(0).call(n.translateTo,o.x,o.y).transition().duration(0).call(n.scaleBy,(.4+.16*i).toFixed(2)),s.set(t.zoomTransform(t.select(`.Nodes-${e}`)).k),r}function Aa(t,e,n,r,o,i,s,l,a,c,u,d){return t?e.zoom().filter(f=>!dt(n)).scaleExtent([.2,10]).translateExtent([[0,0],[t.x,t.y]]).extent([[0,0],[r,o]]).on("zoom",d):e.zoom().filter(f=>!dt(n)).scaleExtent([.2,10]).on("zoom",d)}function Na(t){let e,n;return{c(){e=et("div"),this.h()},l(r){e=nt(r,"DIV",{class:!0,style:!0}),U(e).forEach(T),this.h()},h(){m(e,"class",n="nodes nodes-"+t[0]+" svelte-1eef8gz"),W(e,"top",t[1]+"px"),W(e,"left",t[2]+"px"),W(e,"height",t[4]+"px"),W(e,"width",t[3]+"px")},m(r,o){$(r,e,o)},p(r,[o]){o&1&&n!==(n="nodes nodes-"+r[0]+" svelte-1eef8gz")&&m(e,"class",n),o&2&&W(e,"top",r[1]+"px"),o&4&&W(e,"left",r[2]+"px"),o&16&&W(e,"height",r[4]+"px"),o&8&&W(e,"width",r[3]+"px")},i:yt,o:yt,d(r){r&&T(e)}}}function Ca(t,e,n){let{key:r}=e,{node:o}=e,{heightRatio:i}=e,{widthRatio:s}=e,l=0,a=0,c=0,u=0;return t.$$set=d=>{"key"in d&&n(0,r=d.key),"node"in d&&n(5,o=d.node),"heightRatio"in d&&n(6,i=d.heightRatio),"widthRatio"in d&&n(7,s=d.widthRatio)},t.$$.update=()=>{t.$$.dirty&224&&(n(4,u=Math.max(o.height*i,5)),n(3,c=Math.max(o.width*s,5)),n(1,l=o.positionY*i),n(2,a=o.positionX*s))},[r,l,a,c,u,o,i,s]}class Ta extends gt{constructor(e){super(),mt(this,e,Ca,Na,pt,{key:0,node:5,heightRatio:6,widthRatio:7})}}function cr(t,e,n){const r=t.slice();return r[21]=e[n],r}function ur(t){let e,n;return e=new Ta({props:{node:t[21],key:t[0],heightRatio:t[5],widthRatio:t[4]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o&2048&&(i.node=r[21]),o&1&&(i.key=r[0]),o&32&&(i.heightRatio=r[5]),o&16&&(i.widthRatio=r[4]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Ma(t){let e,n,r,o,i,s,l,a,c=Object.values(t[11]),u=[];for(let f=0;f<c.length;f+=1)u[f]=ur(cr(t,c,f));const d=f=>Q(u[f],1,1,()=>{u[f]=null});return{c(){e=et("div"),n=et("div"),o=vt();for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=nt(f,"DIV",{class:!0,style:!0});var h=U(e);n=nt(h,"DIV",{class:!0,style:!0}),U(n).forEach(T),o=wt(h);for(let g=0;g<u.length;g+=1)u[g].l(h);h.forEach(T),this.h()},h(){m(n,"class",r="viewBox viewBox-"+t[0]+" svelte-ds0tpb"),W(n,"height",t[9]*t[5]/t[1].k+"px"),W(n,"width",t[10]*t[4]/t[1].k+"px"),W(n,"top",t[7]+"px"),W(n,"left",t[6]+"px"),m(e,"class",i=Nt(`miniMap miniMap-${t[0]}`)+" svelte-ds0tpb"),W(e,"height",t[2]+2+"px"),W(e,"width",t[3]+2+"px")},m(f,h){$(f,e,h),V(e,n),V(e,o);for(let g=0;g<u.length;g+=1)u[g].m(e,null);t[18](e),s=!0,l||(a=[tt(e,"click",t[15]),tt(e,"keydown",Pa)],l=!0)},p(f,[h]){if((!s||h&1&&r!==(r="viewBox viewBox-"+f[0]+" svelte-ds0tpb"))&&m(n,"class",r),(!s||h&546)&&W(n,"height",f[9]*f[5]/f[1].k+"px"),(!s||h&1042)&&W(n,"width",f[10]*f[4]/f[1].k+"px"),(!s||h&128)&&W(n,"top",f[7]+"px"),(!s||h&64)&&W(n,"left",f[6]+"px"),h&2097){c=Object.values(f[11]);let g;for(g=0;g<c.length;g+=1){const v=cr(f,c,g);u[g]?(u[g].p(v,h),q(u[g],1)):(u[g]=ur(v),u[g].c(),q(u[g],1),u[g].m(e,null))}for(Tt(),g=c.length;g<u.length;g+=1)d(g);Mt()}(!s||h&1&&i!==(i=Nt(`miniMap miniMap-${f[0]}`)+" svelte-ds0tpb"))&&m(e,"class",i),(!s||h&4)&&W(e,"height",f[2]+2+"px"),(!s||h&8)&&W(e,"width",f[3]+2+"px")},i(f){if(!s){for(let h=0;h<c.length;h+=1)q(u[h]);s=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)Q(u[h]);s=!1},d(f){f&&T(e),$t(u,f),t[18](null),l=!1,oe(a)}}}const Pa=()=>{};function za(t,e,n){let r,o,i,{key:s}=e,{boundary:l}=e,{d3Translate:a}=e,{store:c}=e;const{nodesStore:u,heightStore:d,widthStore:f}=c;at(t,u,k=>n(11,i=k)),at(t,d,k=>n(9,r=k)),at(t,f,k=>n(10,o=k));const h=Nr();let g=100,v=100,b=1,y=1,X=1,R=1,x,_=!1;function p(k){if(!_){_=!0;let N=x.getBoundingClientRect();h("message",{x:(k.clientX-N.left)/b,y:(k.clientY-N.top)/y}),setTimeout(()=>{_=!1},500)}}function I(k){Jt[k?"unshift":"push"](()=>{x=k,n(8,x)})}return t.$$set=k=>{"key"in k&&n(0,s=k.key),"boundary"in k&&n(16,l=k.boundary),"d3Translate"in k&&n(1,a=k.d3Translate),"store"in k&&n(17,c=k.store)},t.$$.update=()=>{t.$$.dirty&65598&&(l.y>l.x?(n(2,g=100),n(3,v=Math.max(l.x.toFixed(0)*100/l.y.toFixed(0),25))):l.y<l.x?(n(3,v=100),n(2,g=Math.max(l.y.toFixed(0)*100/l.x.toFixed(0),25))):(n(2,g=100),n(3,v=100)),n(4,b=v/l.x),n(5,y=g/l.y),n(6,X=Math.abs(a.x*b/a.k)),n(7,R=Math.abs(a.y*y/a.k)))},[s,a,g,v,b,y,X,R,x,r,o,i,u,d,f,p,l,c,I]}class Ra extends gt{constructor(e){super(),mt(this,e,za,Ma,pt,{key:0,boundary:16,d3Translate:1,store:17})}}function Ba(t){let e,n;return{c(){e=et("div"),this.h()},l(r){e=nt(r,"DIV",{class:!0,style:!0}),U(e).forEach(T),this.h()},h(){m(e,"class",n="nodes nodes-"+t[0]+" svelte-1eef8gz"),W(e,"top",t[1]+"px"),W(e,"left",t[2]+"px"),W(e,"height",t[4]+"px"),W(e,"width",t[3]+"px")},m(r,o){$(r,e,o)},p(r,[o]){o&1&&n!==(n="nodes nodes-"+r[0]+" svelte-1eef8gz")&&m(e,"class",n),o&2&&W(e,"top",r[1]+"px"),o&4&&W(e,"left",r[2]+"px"),o&16&&W(e,"height",r[4]+"px"),o&8&&W(e,"width",r[3]+"px")},i:yt,o:yt,d(r){r&&T(e)}}}function Xa(t,e,n){let{key:r}=e,{node:o}=e,{heightRatio:i}=e,{widthRatio:s}=e,{nodeXleftPosition:l}=e,{nodeYbottomPosition:a}=e,c=0,u=0,d=0,f=0;return t.$$set=h=>{"key"in h&&n(0,r=h.key),"node"in h&&n(5,o=h.node),"heightRatio"in h&&n(6,i=h.heightRatio),"widthRatio"in h&&n(7,s=h.widthRatio),"nodeXleftPosition"in h&&n(8,l=h.nodeXleftPosition),"nodeYbottomPosition"in h&&n(9,a=h.nodeYbottomPosition)},t.$$.update=()=>{t.$$.dirty&992&&(n(4,f=Math.max(o.height*i,5)),n(3,d=Math.max(o.width*s,5)),n(1,c=o.positionY*i-a*i+1),n(2,u=o.positionX*s-l*s+1))},[r,c,u,d,f,o,i,s,l,a]}class Da extends gt{constructor(e){super(),mt(this,e,Xa,Ba,pt,{key:0,node:5,heightRatio:6,widthRatio:7,nodeXleftPosition:8,nodeYbottomPosition:9})}}function fr(t,e,n){const r=t.slice();return r[30]=e[n],r}function hr(t){let e,n;return e=new Da({props:{node:t[30],key:t[0],heightRatio:t[3],widthRatio:t[4],nodeXleftPosition:t[5],nodeYbottomPosition:t[6]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&128&&(i.node=r[30]),o[0]&1&&(i.key=r[0]),o[0]&8&&(i.heightRatio=r[3]),o[0]&16&&(i.widthRatio=r[4]),o[0]&32&&(i.nodeXleftPosition=r[5]),o[0]&64&&(i.nodeYbottomPosition=r[6]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Oa(t){let e,n,r,o,i,s,l,a,c=Object.values(t[7]),u=[];for(let f=0;f<c.length;f+=1)u[f]=hr(fr(t,c,f));const d=f=>Q(u[f],1,1,()=>{u[f]=null});return{c(){e=et("div"),n=et("div"),o=vt();for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=nt(f,"DIV",{class:!0,style:!0});var h=U(e);n=nt(h,"DIV",{class:!0,style:!0}),U(n).forEach(T),o=wt(h);for(let g=0;g<u.length;g+=1)u[g].l(h);h.forEach(T),this.h()},h(){m(n,"class",r="viewBox viewBox-"+t[0]+" svelte-ds0tpb"),W(n,"height",t[8]+"px"),W(n,"width",t[9]+"px"),W(n,"top",t[11]+"px"),W(n,"left",t[10]+"px"),m(e,"class",i=Nt(`miniMap miniMap-${t[0]}`)+" svelte-ds0tpb"),W(e,"height",t[2]+20+"px"),W(e,"width",t[1]+20+"px")},m(f,h){$(f,e,h),V(e,n),V(e,o);for(let g=0;g<u.length;g+=1)u[g].m(e,null);t[25](e),s=!0,l||(a=[tt(e,"click",t[16]),tt(e,"keydown",Ya)],l=!0)},p(f,h){if((!s||h[0]&1&&r!==(r="viewBox viewBox-"+f[0]+" svelte-ds0tpb"))&&m(n,"class",r),(!s||h[0]&256)&&W(n,"height",f[8]+"px"),(!s||h[0]&512)&&W(n,"width",f[9]+"px"),(!s||h[0]&2048)&&W(n,"top",f[11]+"px"),(!s||h[0]&1024)&&W(n,"left",f[10]+"px"),h[0]&249){c=Object.values(f[7]);let g;for(g=0;g<c.length;g+=1){const v=fr(f,c,g);u[g]?(u[g].p(v,h),q(u[g],1)):(u[g]=hr(v),u[g].c(),q(u[g],1),u[g].m(e,null))}for(Tt(),g=c.length;g<u.length;g+=1)d(g);Mt()}(!s||h[0]&1&&i!==(i=Nt(`miniMap miniMap-${f[0]}`)+" svelte-ds0tpb"))&&m(e,"class",i),(!s||h[0]&4)&&W(e,"height",f[2]+20+"px"),(!s||h[0]&2)&&W(e,"width",f[1]+20+"px")},i(f){if(!s){for(let h=0;h<c.length;h+=1)q(u[h]);s=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)Q(u[h]);s=!1},d(f){f&&T(e),$t(u,f),t[25](null),l=!1,oe(a)}}}let He=100;const Ya=()=>{};function La(t,e,n){let r,o,i,{key:s}=e,{d3Translate:l}=e,{store:a}=e;const{nodesStore:c,widthStore:u,heightStore:d}=a;at(t,c,A=>n(7,i=A)),at(t,u,A=>n(24,o=A)),at(t,d,A=>n(23,r=A));const f=Nr();let h=He,g=He,v=He-10,b=He-10,y=10,X=10,R=10,x=10,_=1,p=1,I=1/0,k=-1/0,N=1/0,B=-1/0,G,rt=!1;const K=A=>A*(h/b),w=A=>A*(g/v);function z(A){if(!rt){let C=G.getBoundingClientRect();rt=!0,f("message",{x:I+(A.clientX-C.left)/p,y:N+(A.clientY-C.top)/_}),setTimeout(()=>{rt=!1},500)}}function E(A){Jt[A?"unshift":"push"](()=>{G=A,n(12,G)})}return t.$$set=A=>{"key"in A&&n(0,s=A.key),"d3Translate"in A&&n(17,l=A.d3Translate),"store"in A&&n(18,a=A.store)},t.$$.update=()=>{t.$$.dirty[0]&33161470&&(n(5,I=1/0),n(21,k=-1/0),n(6,N=1/0),n(22,B=-1/0),Object.values(i).forEach(A=>{n(5,I=Math.min(I,A.positionX)),n(22,B=Math.max(B,A.positionX)),n(6,N=Math.min(N,A.positionY)),n(21,k=Math.max(k,A.positionY))}),n(19,v=k-N),n(20,b=B-I),v>b?(n(2,g=100),n(1,h=Math.max(b.toFixed(0)*100/v.toFixed(0),25))):v<b?(n(1,h=100),n(2,g=Math.max(v.toFixed(0)*100/b.toFixed(0),25))):(n(2,g=100),n(1,h=100)),n(3,_=(g/v).toFixed(2)),n(4,p=(h/b).toFixed(2)),n(10,R=K(l.x*p-l.x/l.k)-I*p),n(11,x=w(l.y*_-l.y/l.k)-N*_),n(9,X=o*p/l.k),n(8,y=r*_/l.k))},[s,h,g,_,p,I,N,i,y,X,R,x,G,c,u,d,z,l,a,v,b,k,B,r,o,E]}class Fa extends gt{constructor(e){super(),mt(this,e,La,Oa,pt,{key:0,d3Translate:17,store:18},null,[-1,-1])}}function Ha(t){let e,n,r,o,i,s,l,a,c,u,d,f,h,g,v,b,y,X,R,x,_,p,I,k,N,B,G,rt,K,w,z,E,A;return{c(){e=et("div"),n=et("form"),r=et("label"),o=Bt("Edge label"),i=vt(),s=et("input"),a=vt(),c=et("label"),u=Bt("Edge color"),d=vt(),f=et("input"),g=vt(),v=et("input"),b=vt(),y=et("label"),X=Bt("Edge type"),R=vt(),x=et("input"),p=vt(),I=et("div"),k=et("button"),N=Bt("Submit"),B=vt(),G=et("button"),rt=Bt("Delete"),K=vt(),w=et("button"),z=Bt("Cancel"),this.h()},l(C){e=nt(C,"DIV",{class:!0,style:!0});var L=U(e);n=nt(L,"FORM",{class:!0});var M=U(n);r=nt(M,"LABEL",{for:!0,class:!0});var Y=U(r);o=Xt(Y,"Edge label"),Y.forEach(T),i=wt(M),s=nt(M,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),a=wt(M),c=nt(M,"LABEL",{for:!0,class:!0});var j=U(c);u=Xt(j,"Edge color"),j.forEach(T),d=wt(M),f=nt(M,"INPUT",{type:!0,id:!0,class:!0}),g=wt(M),v=nt(M,"INPUT",{type:!0,placeholder:!0,class:!0}),b=wt(M),y=nt(M,"LABEL",{for:!0,class:!0});var Z=U(y);X=Xt(Z,"Edge type"),Z.forEach(T),R=wt(M),x=nt(M,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),M.forEach(T),p=wt(L),I=nt(L,"DIV",{class:!0});var F=U(I);k=nt(F,"BUTTON",{class:!0});var H=U(k);N=Xt(H,"Submit"),H.forEach(T),B=wt(F),G=nt(F,"BUTTON",{class:!0});var bt=U(G);rt=Xt(bt,"Delete"),bt.forEach(T),K=wt(F),w=nt(F,"BUTTON",{class:!0});var ct=U(w);z=Xt(ct,"Cancel"),ct.forEach(T),F.forEach(T),L.forEach(T),this.h()},h(){m(r,"for","label-input"),m(r,"class","svelte-1bj3i1h"),m(s,"type","text"),m(s,"id",l="label-input-"+t[0]),m(s,"placeholder",t[7].label),m(s,"class","svelte-1bj3i1h"),m(c,"for","bg-color-input"),m(c,"class","svelte-1bj3i1h"),m(f,"type","color"),m(f,"id",h="bg-color-input-"+t[0]),m(f,"class","bgci svelte-1bj3i1h"),m(v,"type","text"),m(v,"placeholder",t[7].edgeColor),m(v,"class","svelte-1bj3i1h"),m(y,"for","type-input"),m(y,"class","svelte-1bj3i1h"),m(x,"type","text"),m(x,"id",_="type-input-"+t[0]),m(x,"placeholder",t[7].type),m(x,"class","svelte-1bj3i1h"),m(n,"class","svelte-1bj3i1h"),m(k,"class","svelte-1bj3i1h"),m(G,"class","svelte-1bj3i1h"),m(w,"class","svelte-1bj3i1h"),m(I,"class","btn-container svelte-1bj3i1h"),m(e,"class","EditEdge svelte-1bj3i1h"),W(e,"left",t[5]/3+"px"),W(e,"top",t[6]/3+"px")},m(C,L){$(C,e,L),V(e,n),V(n,r),V(r,o),V(n,i),V(n,s),Gt(s,t[1]),V(n,a),V(n,c),V(c,u),V(n,d),V(n,f),Gt(f,t[2]),V(n,g),V(n,v),Gt(v,t[2]),V(n,b),V(n,y),V(y,X),V(n,R),V(n,x),Gt(x,t[3]),V(e,p),V(e,I),V(I,k),V(k,N),V(I,B),V(I,G),V(G,rt),V(I,K),V(I,w),V(w,z),E||(A=[tt(s,"input",t[16]),tt(f,"input",t[17]),tt(v,"input",t[18]),tt(x,"input",t[19]),tt(n,"submit",t[12]),tt(k,"click",t[12]),tt(G,"click",t[11]),tt(w,"click",t[10]),tt(e,"mouseover",t[20]),tt(e,"focus",t[14]),tt(e,"wheel",hn(t[15]))],E=!0)},p(C,[L]){L&1&&l!==(l="label-input-"+C[0])&&m(s,"id",l),L&2&&s.value!==C[1]&&Gt(s,C[1]),L&1&&h!==(h="bg-color-input-"+C[0])&&m(f,"id",h),L&4&&Gt(f,C[2]),L&4&&v.value!==C[2]&&Gt(v,C[2]),L&1&&_!==(_="type-input-"+C[0])&&m(x,"id",_),L&8&&x.value!==C[3]&&Gt(x,C[3])},i:yt,o:yt,d(C){C&&T(e),E=!1,oe(A)}}}function Va(t,e,n){let r,o,{edgeId:i}=e,{canvasId:s}=e,l,a,c;const u=xt(s),d=dt(u.widthStore),f=dt(u.widthStore),h=ee(u,i),{edgesStore:g,nodeSelected:v}=u;at(t,g,B=>n(21,r=B)),at(t,v,B=>n(4,o=B));function b(){xt(s).edgeEditModal.set(null)}function y(){const B=xt(s);ee(B,i).delete(),b()}function X(B){B.preventDefault();const G=xt(s),rt=ee(G,i);l&&(rt.label=l),a&&(rt.edgeColor=a),c&&(rt.type=c),G.edgesStore.set(r),b()}function R(B){ve.call(this,t,B)}function x(B){ve.call(this,t,B)}function _(){l=this.value,n(1,l)}function p(){a=this.value,n(2,a)}function I(){a=this.value,n(2,a)}function k(){c=this.value,n(3,c)}const N=B=>Ve(v,o=!0,o);return t.$$set=B=>{"edgeId"in B&&n(0,i=B.edgeId),"canvasId"in B&&n(13,s=B.canvasId)},[i,l,a,c,o,d,f,h,g,v,b,y,X,s,R,x,_,p,I,k,N]}class qa extends gt{constructor(e){super(),mt(this,e,Va,Ha,pt,{edgeId:0,canvasId:13})}}function dr(t,e,n){const r=t.slice();return r[45]=e[n],r}function gr(t,e,n){const r=t.slice();return r[48]=e[n],r}function mr(t,e,n){const r=t.slice();return r[51]=e[n],r}function pr(t,e,n){const r=t.slice();return r[54]=e[n],r}function _r(t,e,n){const r=t.slice();return r[57]=e[n],r}function yr(t){let e,n;return e=new qa({props:{edgeId:`${t[9]}`,canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&512&&(i.edgeId=`${r[9]}`),o[0]&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Ua(t){let e,n,r;return n=new Fa({props:{key:t[27],d3Translate:t[3],store:t[14]}}),n.$on("message",t[26]),{c(){e=et("div"),ut(n.$$.fragment),this.h()},l(o){e=nt(o,"DIV",{class:!0});var i=U(e);_t(n.$$.fragment,i),i.forEach(T),this.h()},h(){m(e,"class","pointer-events-auto svelte-c90zt3")},m(o,i){$(o,e,i),ft(n,e,null),r=!0},p(o,i){const s={};i[0]&8&&(s.d3Translate=o[3]),n.$set(s)},i(o){r||(q(n.$$.fragment,o),r=!0)},o(o){Q(n.$$.fragment,o),r=!1},d(o){o&&T(e),ht(n)}}}function Wa(t){let e,n,r;return n=new Ra({props:{key:t[27],boundary:t[1],d3Translate:t[3],store:t[14]}}),n.$on("message",t[26]),{c(){e=et("div"),ut(n.$$.fragment),this.h()},l(o){e=nt(o,"DIV",{class:!0});var i=U(e);_t(n.$$.fragment,i),i.forEach(T),this.h()},h(){m(e,"class","pointer-events-auto svelte-c90zt3")},m(o,i){$(o,e,i),ft(n,e,null),r=!0},p(o,i){const s={};i[0]&2&&(s.boundary=o[1]),i[0]&8&&(s.d3Translate=o[3]),n.$set(s)},i(o){r||(q(n.$$.fragment,o),r=!0)},o(o){Q(n.$$.fragment,o),r=!1},d(o){o&&T(e),ht(n)}}}function vr(t){let e,n;return e=new pa({props:{node:t[57],canvasId:t[0],nodeId:t[57].id}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&256&&(i.node=r[57]),o[0]&1&&(i.canvasId=r[0]),o[0]&256&&(i.nodeId=r[57].id),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function wr(t){let e,n;return e=new ka({props:{canvasId:t[0],x:t[54].positionX,y:t[54].positionY,potentialAnchorId:t[54].id}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&1&&(i.canvasId=r[0]),o[0]&32&&(i.x=r[54].positionX),o[0]&32&&(i.y=r[54].positionY),o[0]&32&&(i.potentialAnchorId=r[54].id),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function br(t){let e,n;return{c(){e=it("rect"),n=it("rect"),this.h()},l(r){e=st(r,"rect",{width:!0,height:!0,style:!0}),U(e).forEach(T),n=st(r,"rect",{width:!0,height:!0,style:!0}),U(n).forEach(T),this.h()},h(){m(e,"width","100%"),m(e,"height","100%"),W(e,"fill","url(#background-"+t[0]+")"),m(n,"width","100%"),m(n,"height","100%"),W(n,"fill","url(#coarse-background-"+t[0]+")")},m(r,o){$(r,e,o),$(r,n,o)},p(r,o){o[0]&1&&W(e,"fill","url(#background-"+r[0]+")"),o[0]&1&&W(n,"fill","url(#coarse-background-"+r[0]+")")},d(r){r&&T(e),r&&T(n)}}}function Ga(t){let e,n;return e=new ea({props:{edgeId:t[51].id,canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&128&&(i.edgeId=r[51].id),o[0]&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Qa(t){let e,n;return e=new sa({props:{edge:t[51],canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&128&&(i.edge=r[51]),o[0]&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Ka(t){let e,n;return e=new oo({props:{edge:t[51],canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&128&&(i.edge=r[51]),o[0]&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Za(t){let e,n;return e=new ca({props:{edgeId:t[51].id,canvasId:t[0]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&128&&(i.edgeId=r[51].id),o[0]&1&&(i.canvasId=r[0]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function kr(t){let e,n,r,o;const i=[Za,Ka,Qa,Ga],s=[];function l(a,c){return a[51].type==="straight"?0:a[51].type==="smoothstep"?1:a[51].type==="step"?2:3}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=Dt()},l(a){n.l(a),r=Dt()},m(a,c){s[e].m(a,c),$(a,r,c),o=!0},p(a,c){let u=e;e=l(a),e===u?s[e].p(a,c):(Tt(),Q(s[u],1,1,()=>{s[u]=null}),Mt(),n=s[e],n?n.p(a,c):(n=s[e]=i[e](a),n.c()),q(n,1),n.m(r.parentNode,r))},i(a){o||(q(n),o=!0)},o(a){Q(n),o=!1},d(a){s[e].d(a),a&&T(r)}}}function Sr(t){let e,n;return e=new Ea({props:{temporaryEdge:t[48]}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&16&&(i.temporaryEdge=r[48]),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Ir(t){let e,n;return e=new ha({props:{x:t[45].positionX,y:t[45].positionY}}),{c(){ut(e.$$.fragment)},l(r){_t(e.$$.fragment,r)},m(r,o){ft(e,r,o),n=!0},p(r,o){const i={};o[0]&64&&(i.x=r[45].positionX),o[0]&64&&(i.y=r[45].positionY),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ht(e,r)}}}function Ja(t){let e,n,r,o,i,s,l,a,c,u,d,f,h,g,v,b,y,X,R,x,_,p,I,k,N,B,G,rt,K=t[9]&&yr(t);const w=[Wa,Ua],z=[];function E(S,D){return S[2]&&S[1]?0:S[2]?1:-1}~(r=E(t))&&(o=z[r]=w[r](t));let A=t[8],C=[];for(let S=0;S<A.length;S+=1)C[S]=vr(_r(t,A,S));const L=S=>Q(C[S],1,1,()=>{C[S]=null});let M=t[5],Y=[];for(let S=0;S<M.length;S+=1)Y[S]=wr(pr(t,M,S));const j=S=>Q(Y[S],1,1,()=>{Y[S]=null});let Z=t[13]&&br(t),F=t[7],H=[];for(let S=0;S<F.length;S+=1)H[S]=kr(mr(t,F,S));const bt=S=>Q(H[S],1,1,()=>{H[S]=null});let ct=t[4],J=[];for(let S=0;S<ct.length;S+=1)J[S]=Sr(gr(t,ct,S));const jt=S=>Q(J[S],1,1,()=>{J[S]=null});let Lt=t[6],lt=[];for(let S=0;S<Lt.length;S+=1)lt[S]=Ir(dr(t,Lt,S));const O=S=>Q(lt[S],1,1,()=>{lt[S]=null});return{c(){K&&K.c(),e=vt(),n=et("div"),o&&o.c(),i=vt(),s=et("div"),l=et("div");for(let S=0;S<C.length;S+=1)C[S].c();a=vt();for(let S=0;S<Y.length;S+=1)Y[S].c();d=vt(),f=it("svg"),h=it("defs"),g=it("pattern"),v=it("circle"),y=it("pattern"),X=it("circle"),Z&&Z.c(),_=it("g");for(let S=0;S<H.length;S+=1)H[S].c();p=Dt();for(let S=0;S<J.length;S+=1)J[S].c();I=Dt();for(let S=0;S<lt.length;S+=1)lt[S].c();this.h()},l(S){K&&K.l(S),e=wt(S),n=nt(S,"DIV",{id:!0,class:!0});var D=U(n);o&&o.l(D),i=wt(D),s=nt(D,"DIV",{class:!0});var ot=U(s);l=nt(ot,"DIV",{class:!0});var P=U(l);for(let St=0;St<C.length;St+=1)C[St].l(P);a=wt(P);for(let St=0;St<Y.length;St+=1)Y[St].l(P);P.forEach(T),ot.forEach(T),D.forEach(T),d=wt(S),f=st(S,"svg",{class:!0,viewBox:!0});var kt=U(f);h=st(kt,"defs",{});var ln=U(h);g=st(ln,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,class:!0});var Rn=U(g);v=st(Rn,"circle",{id:!0,cx:!0,cy:!0,r:!0,style:!0}),U(v).forEach(T),Rn.forEach(T),y=st(ln,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,class:!0});var Bn=U(y);X=st(Bn,"circle",{id:!0,cx:!0,cy:!0,r:!0,style:!0}),U(X).forEach(T),Bn.forEach(T),ln.forEach(T),Z&&Z.l(kt),_=st(kt,"g",{});var Pe=U(_);for(let St=0;St<H.length;St+=1)H[St].l(Pe);p=Dt();for(let St=0;St<J.length;St+=1)J[St].l(Pe);I=Dt();for(let St=0;St<lt.length;St+=1)lt[St].l(Pe);Pe.forEach(T),kt.forEach(T),this.h()},h(){m(l,"class",c=Nt(`Node Node-${t[0]}`)+" svelte-c90zt3"),m(s,"class",u=Nt(`Nodes Nodes-${t[0]}`)+" svelte-c90zt3"),m(n,"id","graphview-container"),m(n,"class","svelte-c90zt3"),m(v,"id","dot"),m(v,"cx",Et/2-Ht/2),m(v,"cy",Et/2-Ht/2),m(v,"r","0.5"),W(v,"fill","gray"),m(g,"id",b=`background-${t[0]}`),m(g,"x","0"),m(g,"y","0"),m(g,"width",Et),m(g,"height",Et),m(g,"patternUnits","userSpaceOnUse"),m(g,"class","svelte-c90zt3"),m(X,"id","coarse-dot"),m(X,"cx",Et/2-Ht/2),m(X,"cy",Et/2-Ht/2),m(X,"r","0.75"),m(X,"style",R=t[12]==="light"?"fill: #222222":"fill: white"),m(y,"id",x=`coarse-background-${t[0]}`),m(y,"x","0"),m(y,"y","0"),m(y,"width",ie*Et),m(y,"height",ie*Et),m(y,"patternUnits","userSpaceOnUse"),m(y,"class","svelte-c90zt3"),m(f,"class",k=Nt(`Edges Edges-${t[0]}`)+" svelte-c90zt3"),m(f,"viewBox",N="0 0 "+t[10]+" "+t[11])},m(S,D){K&&K.m(S,D),$(S,e,D),$(S,n,D),~r&&z[r].m(n,null),V(n,i),V(n,s),V(s,l);for(let ot=0;ot<C.length;ot+=1)C[ot].m(l,null);V(l,a);for(let ot=0;ot<Y.length;ot+=1)Y[ot].m(l,null);$(S,d,D),$(S,f,D),V(f,h),V(h,g),V(g,v),V(h,y),V(y,X),Z&&Z.m(f,null),V(f,_);for(let ot=0;ot<H.length;ot+=1)H[ot].m(_,null);V(_,p);for(let ot=0;ot<J.length;ot+=1)J[ot].m(_,null);V(_,I);for(let ot=0;ot<lt.length;ot+=1)lt[ot].m(_,null);B=!0,G||(rt=[tt(s,"contextmenu",hn(t[38])),tt(f,"contextmenu",hn(t[37]))],G=!0)},p(S,D){S[9]?K?(K.p(S,D),D[0]&512&&q(K,1)):(K=yr(S),K.c(),q(K,1),K.m(e.parentNode,e)):K&&(Tt(),Q(K,1,1,()=>{K=null}),Mt());let ot=r;if(r=E(S),r===ot?~r&&z[r].p(S,D):(o&&(Tt(),Q(z[ot],1,1,()=>{z[ot]=null}),Mt()),~r?(o=z[r],o?o.p(S,D):(o=z[r]=w[r](S),o.c()),q(o,1),o.m(n,i)):o=null),D[0]&257){A=S[8];let P;for(P=0;P<A.length;P+=1){const kt=_r(S,A,P);C[P]?(C[P].p(kt,D),q(C[P],1)):(C[P]=vr(kt),C[P].c(),q(C[P],1),C[P].m(l,a))}for(Tt(),P=A.length;P<C.length;P+=1)L(P);Mt()}if(D[0]&33){M=S[5];let P;for(P=0;P<M.length;P+=1){const kt=pr(S,M,P);Y[P]?(Y[P].p(kt,D),q(Y[P],1)):(Y[P]=wr(kt),Y[P].c(),q(Y[P],1),Y[P].m(l,null))}for(Tt(),P=M.length;P<Y.length;P+=1)j(P);Mt()}if((!B||D[0]&1&&c!==(c=Nt(`Node Node-${S[0]}`)+" svelte-c90zt3"))&&m(l,"class",c),(!B||D[0]&1&&u!==(u=Nt(`Nodes Nodes-${S[0]}`)+" svelte-c90zt3"))&&m(s,"class",u),(!B||D[0]&1&&b!==(b=`background-${S[0]}`))&&m(g,"id",b),(!B||D[0]&4096&&R!==(R=S[12]==="light"?"fill: #222222":"fill: white"))&&m(X,"style",R),(!B||D[0]&1&&x!==(x=`coarse-background-${S[0]}`))&&m(y,"id",x),S[13]?Z?Z.p(S,D):(Z=br(S),Z.c(),Z.m(f,_)):Z&&(Z.d(1),Z=null),D[0]&129){F=S[7];let P;for(P=0;P<F.length;P+=1){const kt=mr(S,F,P);H[P]?(H[P].p(kt,D),q(H[P],1)):(H[P]=kr(kt),H[P].c(),q(H[P],1),H[P].m(_,p))}for(Tt(),P=F.length;P<H.length;P+=1)bt(P);Mt()}if(D[0]&16){ct=S[4];let P;for(P=0;P<ct.length;P+=1){const kt=gr(S,ct,P);J[P]?(J[P].p(kt,D),q(J[P],1)):(J[P]=Sr(kt),J[P].c(),q(J[P],1),J[P].m(_,I))}for(Tt(),P=ct.length;P<J.length;P+=1)jt(P);Mt()}if(D[0]&64){Lt=S[6];let P;for(P=0;P<Lt.length;P+=1){const kt=dr(S,Lt,P);lt[P]?(lt[P].p(kt,D),q(lt[P],1)):(lt[P]=Ir(kt),lt[P].c(),q(lt[P],1),lt[P].m(_,null))}for(Tt(),P=Lt.length;P<lt.length;P+=1)O(P);Mt()}(!B||D[0]&1&&k!==(k=Nt(`Edges Edges-${S[0]}`)+" svelte-c90zt3"))&&m(f,"class",k),(!B||D[0]&3072&&N!==(N="0 0 "+S[10]+" "+S[11]))&&m(f,"viewBox",N)},i(S){if(!B){q(K),q(o);for(let D=0;D<A.length;D+=1)q(C[D]);for(let D=0;D<M.length;D+=1)q(Y[D]);for(let D=0;D<F.length;D+=1)q(H[D]);for(let D=0;D<ct.length;D+=1)q(J[D]);for(let D=0;D<Lt.length;D+=1)q(lt[D]);B=!0}},o(S){Q(K),Q(o),C=C.filter(Boolean);for(let D=0;D<C.length;D+=1)Q(C[D]);Y=Y.filter(Boolean);for(let D=0;D<Y.length;D+=1)Q(Y[D]);H=H.filter(Boolean);for(let D=0;D<H.length;D+=1)Q(H[D]);J=J.filter(Boolean);for(let D=0;D<J.length;D+=1)Q(J[D]);lt=lt.filter(Boolean);for(let D=0;D<lt.length;D+=1)Q(lt[D]);B=!1},d(S){K&&K.d(S),S&&T(e),S&&T(n),~r&&z[r].d(),$t(C,S),$t(Y,S),S&&T(d),S&&T(f),Z&&Z.d(),$t(H,S),$t(J,S),$t(lt,S),G=!1,oe(rt)}}}const Et=15,Ht=10,ie=3;function ja(t,e,n){let r,o,i,s,l,a,c,u,d,f,h,g,v,b,y,X,{canvasId:R}=e,{width:x}=e,{height:_}=e,{initialZoom:p=3}=e,{initialLocation:I}=e,{boundary:k=!1}=e,{minimap:N=!1}=e;const B=xt(R),{edgesStore:G,nodesStore:rt,anchorsStore:K,potentialAnchorsStore:w,temporaryEdgeStore:z,nodeSelected:E,backgroundStore:A,movementStore:C,widthStore:L,heightStore:M,d3Scale:Y,edgeEditModal:j,themeStore:Z}=B;at(t,G,O=>n(35,f=O)),at(t,rt,O=>n(36,h=O)),at(t,K,O=>n(34,d=O)),at(t,w,O=>n(33,u=O)),at(t,z,O=>n(32,c=O)),at(t,A,O=>n(13,X=O)),at(t,C,O=>n(39,a=O)),at(t,L,O=>n(10,v=O)),at(t,M,O=>n(11,b=O)),at(t,j,O=>n(9,g=O)),at(t,Z,O=>n(12,y=O));let F={zoom:Vl,zoomTransform:ro,zoomIdentity:sn,select:Zt,selectAll:Ji,pointer:Qt},H=Aa(k,F,E,x,_,C,A,Et,Ht,R,Y,jt),bt={x:0,y:0,k:1};kn(()=>{F.select(`.Edges-${R}`).call(H),F.select(`.Nodes-${R}`).call(H),F.select(`#background-${R}`).call(H),F.selectAll("#dot").call(H),n(3,bt=xa(F,R,H,bt,I,p,Y))});function ct(O){k?(F.select(`.Edges-${J}`).transition().duration(500).call(H.translateTo,O.detail.x,O.detail.y),F.select(`.Nodes-${J}`).transition().duration(500).call(H.translateTo,O.detail.x,O.detail.y)):(F.select(`.Edges-${J}`).transition().duration(500).call(H.translateTo,O.detail.x,O.detail.y),F.select(`.Nodes-${J}`).transition().duration(500).call(H.translateTo,O.detail.x,O.detail.y))}const J=R;function jt(O){if(!a)return;Y.set(O.transform.k),A&&(F.select(`#background-${R}`).attr("x",O.transform.x).attr("y",O.transform.y).attr("width",Et*O.transform.k).attr("height",Et*O.transform.k).selectAll("#dot").attr("x",Et*O.transform.k/2-Ht/2).attr("y",Et*O.transform.k/2-Ht/2).attr("opacity",Math.min(O.transform.k-.5,1)),F.select(`#coarse-background-${R}`).attr("x",O.transform.x).attr("y",O.transform.y).attr("width",ie*Et*O.transform.k).attr("height",ie*Et*O.transform.k).selectAll("#coarse-dot").attr("x",ie*(Et*O.transform.k/2-Ht/2)).attr("y",ie*(Et*O.transform.k/2-Ht/2)).attr("opacity",Math.min(O.transform.k-.2,1))),F.select(`.Edges-${R} g`).attr("transform",O.transform);let S=F.zoomTransform(this);n(3,bt=S),F.select(`.Node-${R}`).style("transform","translate("+S.x+"px,"+S.y+"px) scale("+S.k+")").style("transform-origin","0 0")}function Lt(O){ve.call(this,t,O)}function lt(O){ve.call(this,t,O)}return t.$$set=O=>{"canvasId"in O&&n(0,R=O.canvasId),"width"in O&&n(28,x=O.width),"height"in O&&n(29,_=O.height),"initialZoom"in O&&n(30,p=O.initialZoom),"initialLocation"in O&&n(31,I=O.initialLocation),"boundary"in O&&n(1,k=O.boundary),"minimap"in O&&n(2,N=O.minimap)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(8,r=Object.values(h)),t.$$.dirty[1]&16&&n(7,o=Object.values(f)),t.$$.dirty[1]&8&&n(6,i=Object.values(d)),t.$$.dirty[1]&4&&n(5,s=Object.values(u)),t.$$.dirty[1]&2&&n(4,l=c)},[R,k,N,bt,l,s,i,o,r,g,v,b,y,X,B,G,rt,K,w,z,A,C,L,M,j,Z,ct,J,x,_,p,I,c,u,d,f,h,Lt,lt]}class $a extends gt{constructor(e){super(),mt(this,e,ja,Ja,pt,{canvasId:0,width:28,height:29,initialZoom:30,initialLocation:31,boundary:1,minimap:2},null,[-1,-1])}}function Er(t,e){return nc(t),rc(e),ec(t,e),tc(e),{userNodes:t,userEdges:e}}function tc(t){for(let e of t)["smoothstep","step","bezier","straight"].includes(e.type)||(e.type="bezier")}function ec(t,e){const n={};for(let r of t)n[r.id]=r;for(let r of e){const o=n[r.source],i=n[r.target],s=o.sourcePosition,l=i.targetPosition,a={left:be,right:we,top:ke,bottom:Se};s&&(r.sourceAnchorCb=a[s]),l&&(r.targetAnchorCb=a[l])}}function nc(t){t=t.map(e=>(e.id=e.id.toString(),e.childNodes=e.childNodes===void 0?[]:e.childNodes.map(n=>n.toString()),e))}function rc(t){t=t.map(e=>(e.source=e.source.toString(),e.target=e.target.toString(),e))}function oc(t){let e,n,r,o;return n=new $a({props:{canvasId:t[4],width:t[2],height:t[3],initialLocation:t[6],initialZoom:t[5],boundary:t[7],minimap:t[1]}}),{c(){e=et("div"),ut(n.$$.fragment),this.h()},l(i){e=nt(i,"DIV",{class:!0,style:!0});var s=U(e);_t(n.$$.fragment,s),s.forEach(T),this.h()},h(){m(e,"class","Svelvet svelte-tw9ly1"),m(e,"style",r=`width: ${t[2]}px; height: ${t[3]}px; background-color: ${t[0]};`)},m(i,s){$(i,e,s),ft(n,e,null),o=!0},p(i,[s]){const l={};s&16&&(l.canvasId=i[4]),s&4&&(l.width=i[2]),s&8&&(l.height=i[3]),s&64&&(l.initialLocation=i[6]),s&32&&(l.initialZoom=i[5]),s&128&&(l.boundary=i[7]),s&2&&(l.minimap=i[1]),n.$set(l),(!o||s&13&&r!==(r=`width: ${i[2]}px; height: ${i[3]}px; background-color: ${i[0]};`))&&m(e,"style",r)},i(i){o||(q(n.$$.fragment,i),o=!0)},o(i){Q(n.$$.fragment,i),o=!1},d(i){i&&T(e),ht(n)}}}function ic(t,e,n){const r=()=>(Math.random()+1).toString(36).substring(7);let{nodes:o}=e,{edges:i}=e,{bgColor:s="#ffffff"}=e,{minimap:l=!1}=e,{width:a=600}=e,{height:c=600}=e,{background:u=!0}=e,{movement:d=!0}=e,{canvasId:f=r()}=e,{snap:h=!1}=e,{snapTo:g=30}=e,{nodeCreate:v=!1}=e,{initialZoom:b=3}=e,{initialLocation:y={x:0,y:0}}=e,{boundary:X=!1}=e,{locked:R=!1}=e,{theme:x="light"}=e;const _=mo(f);return kn(()=>{let p=Er(o,i);const I=p.userNodes,k=p.userEdges;_.widthStore.set(a),_.heightStore.set(c),_.backgroundStore.set(u),_.movementStore.set(d);const N={snap:h,snapTo:g};_.options.set(N),_.nodeCreate.set(v),_.boundary.set(X),_.lockedOption.set(R),_.themeStore.set(x),Yn(f,I,k)}),Ar(()=>{let p=Er(o,i);const I=p.userNodes,k=p.userEdges;_.widthStore.set(a),_.heightStore.set(c),_.backgroundStore.set(u),_.movementStore.set(d);const N={snap:h,snapTo:g};_.options.set(N),_.nodeCreate.set(v),_.boundary.set(X),_.lockedOption.set(R),_.themeStore.set(x),Yn(f,I,k)}),t.$$set=p=>{"nodes"in p&&n(8,o=p.nodes),"edges"in p&&n(9,i=p.edges),"bgColor"in p&&n(0,s=p.bgColor),"minimap"in p&&n(1,l=p.minimap),"width"in p&&n(2,a=p.width),"height"in p&&n(3,c=p.height),"background"in p&&n(10,u=p.background),"movement"in p&&n(11,d=p.movement),"canvasId"in p&&n(4,f=p.canvasId),"snap"in p&&n(12,h=p.snap),"snapTo"in p&&n(13,g=p.snapTo),"nodeCreate"in p&&n(14,v=p.nodeCreate),"initialZoom"in p&&n(5,b=p.initialZoom),"initialLocation"in p&&n(6,y=p.initialLocation),"boundary"in p&&n(7,X=p.boundary),"locked"in p&&n(15,R=p.locked),"theme"in p&&n(16,x=p.theme)},[s,l,a,c,f,b,y,X,o,i,u,d,h,g,v,R,x]}class sc extends gt{constructor(e){super(),mt(this,e,ic,oc,pt,{nodes:8,edges:9,bgColor:0,minimap:1,width:2,height:3,background:10,movement:11,canvasId:4,snap:12,snapTo:13,nodeCreate:14,initialZoom:5,initialLocation:6,boundary:7,locked:15,theme:16})}}function lc(t){let e,n,r=[t[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],o={};for(let i=0;i<r.length;i+=1)o=qt(o,r[i]);return{c(){e=it("svg"),n=it("path"),this.h()},l(i){e=st(i,"svg",{fill:!0,viewBox:!0});var s=U(e);n=st(s,"path",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(n).forEach(T),s.forEach(T),this.h()},h(){m(n,"fill","none"),m(n,"stroke","currentColor"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"stroke-width","32"),m(n,"d","M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40zM32 192h448"),le(e,o)},m(i,s){$(i,e,s),V(e,n)},p(i,[s]){le(e,o=Sn(r,[s&1&&i[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:yt,o:yt,d(i){i&&T(e)}}}function ac(t,e,n){return t.$$set=r=>{n(0,e=qt(qt({},e),ae(r)))},e=ae(e),[e]}class cc extends gt{constructor(e){super(),mt(this,e,ac,lc,pt,{})}}function uc(t){let e,n,r=[t[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],o={};for(let i=0;i<r.length;i+=1)o=qt(o,r[i]);return{c(){e=it("svg"),n=it("path"),this.h()},l(i){e=st(i,"svg",{fill:!0,viewBox:!0});var s=U(e);n=st(s,"path",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(n).forEach(T),s.forEach(T),this.h()},h(){m(n,"fill","none"),m(n,"stroke","currentColor"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"stroke-width","32"),m(n,"d","m53.12 199.94 400-151.39a8 8 0 0 1 10.33 10.33l-151.39 400a8 8 0 0 1-15-.34l-67.4-166.09a16 16 0 0 0-10.11-10.11L53.46 215a8 8 0 0 1-.34-15.06zM460 52 227 285"),le(e,o)},m(i,s){$(i,e,s),V(e,n)},p(i,[s]){le(e,o=Sn(r,[s&1&&i[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:yt,o:yt,d(i){i&&T(e)}}}function fc(t,e,n){return t.$$set=r=>{n(0,e=qt(qt({},e),ae(r)))},e=ae(e),[e]}class hc extends gt{constructor(e){super(),mt(this,e,fc,uc,pt,{})}}function dc(t){let e,n,r=[t[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],o={};for(let i=0;i<r.length;i+=1)o=qt(o,r[i]);return{c(){e=it("svg"),n=it("path"),this.h()},l(i){e=st(i,"svg",{fill:!0,viewBox:!0});var s=U(e);n=st(s,"path",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(n).forEach(T),s.forEach(T),this.h()},h(){m(n,"fill","none"),m(n,"stroke","currentColor"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"stroke-width","32"),m(n,"d","M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"),le(e,o)},m(i,s){$(i,e,s),V(e,n)},p(i,[s]){le(e,o=Sn(r,[s&1&&i[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:yt,o:yt,d(i){i&&T(e)}}}function gc(t,e,n){return t.$$set=r=>{n(0,e=qt(qt({},e),ae(r)))},e=ae(e),[e]}class mc extends gt{constructor(e){super(),mt(this,e,gc,dc,pt,{})}}function pc(t){let e,n,r,o,i,s;function l(d){t[9](d)}function a(d){t[10](d)}function c(d){t[11](d)}let u={bgColor:"transparent",width:t[3],height:t[4],background:!0,minimap:!0};return t[5]!==void 0&&(u.nodes=t[5]),t[6]!==void 0&&(u.edges=t[6]),t[0]!==void 0&&(u.theme=t[0]),n=new sc({props:u}),Jt.push(()=>qe(n,"nodes",l)),Jt.push(()=>qe(n,"edges",a)),Jt.push(()=>qe(n,"theme",c)),{c(){e=et("div"),ut(n.$$.fragment),this.h()},l(d){e=nt(d,"DIV",{class:!0});var f=U(e);_t(n.$$.fragment,f),f.forEach(T),this.h()},h(){m(e,"class","container svelte-1b4fxv"),ze(e,"svelvet-dark",t[0]==="dark"),ze(e,"translucent",t[1])},m(d,f){$(d,e,f),ft(n,e,null),t[12](e),s=!0},p(d,[f]){const h={};f&8&&(h.width=d[3]),f&16&&(h.height=d[4]),!r&&f&32&&(r=!0,h.nodes=d[5],Ue(()=>r=!1)),!o&&f&64&&(o=!0,h.edges=d[6],Ue(()=>o=!1)),!i&&f&1&&(i=!0,h.theme=d[0],Ue(()=>i=!1)),n.$set(h),(!s||f&1)&&ze(e,"svelvet-dark",d[0]==="dark"),(!s||f&2)&&ze(e,"translucent",d[1])},i(d){s||(q(n.$$.fragment,d),s=!0)},o(d){Q(n.$$.fragment,d),s=!1},d(d){d&&T(e),ht(n),t[12](null)}}}function _c(t,e,n){let{theme:r="light"}=e,{minimap:o="none"}=e,{translucent:i=!1}=e,{library:s={}}=e,l,a,c=1,u=1,d=[{id:"1",icon:cc,position:{x:0,y:50},width:60,height:60,bgColor:"#ff7788"},{id:"2",icon:mc,label:"component/2",position:{x:100,y:150},width:60,height:120},{id:"3",icon:hc,position:{x:300,y:50},width:60,height:60}],f=[{id:"e1-2",source:"1",target:"2",animate:!0},{id:"e2-3",source:"2",target:"3",animate:!0}];kn(async()=>{a=new ResizeObserver(y=>{n(3,c=y[0].contentRect.width),n(4,u=y[0].contentRect.height)}),a.observe(l),await io(),n(3,c=l.clientWidth),n(4,u=l.clientHeight)}),so(()=>{a==null||a.unobserve(l)});function h(y){d=y,n(5,d)}function g(y){f=y,n(6,f)}function v(y){r=y,n(0,r)}function b(y){Jt[y?"unshift":"push"](()=>{l=y,n(2,l)})}return t.$$set=y=>{"theme"in y&&n(0,r=y.theme),"minimap"in y&&n(7,o=y.minimap),"translucent"in y&&n(1,i=y.translucent),"library"in y&&n(8,s=y.library)},[r,i,l,c,u,d,f,o,s,h,g,v,b]}class yc extends gt{constructor(e){super(),mt(this,e,_c,pc,pt,{theme:0,minimap:7,translucent:1,library:8})}}const vc={category:"core",factory:t=>{const e=new t({description:"Logs packets to browser console",icon:"info",inPorts:{in:{datatype:"object",required:!0}}});return e.process((n,r)=>{if(!n.hasData("in"))return;const o=n.getData("in");console.log(o),r.done()}),e}},wc={category:"core",factory:t=>{const e=new t({description:"filters based on an input string",icon:"filter",inPorts:{input:{datatype:"number",required:!0}},outPorts:{output:{datatype:"number"}}});return e.process((n,r)=>{if(!n.hasData("augend","addend"))return;const[o,i]=n.getData("augend","addend");r.sendDone({sum:Number(o)+Number(i)})}),e}},bc={category:"core",factory:t=>{const e=new t({description:"reshapes a data packet",icon:"shapes",inPorts:{augend:{datatype:"number",required:!0},addend:{datatype:"number",required:!0}},outPorts:{sum:{datatype:"number"}}});return e.process((n,r)=>{if(!n.hasData("augend","addend"))return;const[o,i]=n.getData("augend","addend");r.sendDone({sum:Number(o)+Number(i)})}),e}},kc={"console log":vc,filter:wc,reshape:bc};function Sc(t){let e,n,r,o,i,s,l,a,c,u;function d(h){t[3](h)}let f={library:kc};return t[1]!==void 0&&(f.theme=t[1]),n=new yc({props:f}),t[2](n),Jt.push(()=>qe(n,"theme",d)),{c(){e=et("div"),ut(n.$$.fragment),o=vt(),i=et("div"),s=et("button"),l=Bt("Toggle Theme"),this.h()},l(h){e=nt(h,"DIV",{class:!0});var g=U(e);_t(n.$$.fragment,g),g.forEach(T),o=wt(h),i=nt(h,"DIV",{class:!0});var v=U(i);s=nt(v,"BUTTON",{class:!0});var b=U(s);l=Xt(b,"Toggle Theme"),b.forEach(T),v.forEach(T),this.h()},h(){m(e,"class","editor svelte-dvct1s"),m(s,"class","svelte-dvct1s"),m(i,"class","overlay svelte-dvct1s")},m(h,g){$(h,e,g),ft(n,e,null),$(h,o,g),$(h,i,g),V(i,s),V(s,l),a=!0,c||(u=tt(s,"click",t[4]),c=!0)},p(h,[g]){const v={};!r&&g&2&&(r=!0,v.theme=h[1],Ue(()=>r=!1)),n.$set(v)},i(h){a||(q(n.$$.fragment,h),a=!0)},o(h){Q(n.$$.fragment,h),a=!1},d(h){h&&T(e),t[2](null),ht(n),h&&T(o),h&&T(i),c=!1,u()}}}function Ic(t,e,n){let r,o="light";function i(a){Jt[a?"unshift":"push"](()=>{r=a,n(0,r)})}function s(a){o=a,n(1,o)}return[r,o,i,s,()=>{n(1,o=o==="light"?"dark":"light")}]}class Tc extends gt{constructor(e){super(),mt(this,e,Ic,Sc,pt,{})}}export{Tc as default};
